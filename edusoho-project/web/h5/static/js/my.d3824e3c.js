(window.webpackJsonp=window.webpackJsonp||[]).push([["my"],{"5ede":function(t,e,i){"use strict";var s=i("240b");e.a={beforeRouteEnter:function(t,e,i){s.a.state.token?i():i({name:"prelogin",query:{redirect:t.fullPath}})}}},7067:function(t,e,i){"use strict";i("e17f");var s=i("2241"),r=(i("e7e5"),i("d399")),a=i("a026"),n=i("3ce7"),c=/micromessenger/.test(navigator.userAgent.toLowerCase());e.a=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||i&&!e)r.a.fail("缺少分享参数");else{var o={domainUri:location.origin,itemUri:"",source:"h5"};n.a.marketingActivities({query:{activityId:t},data:o}).then((function(t){var n=-1!==t.url.indexOf("?")?"&":"?",o=i?"".concat(e).concat(n,"ticket=").concat(t.ticket):t.url;c?window.location.href=o:s.a.confirm({message:"去微信完成活动",confirmButtonText:"复制链接",title:""}).then((function(){try{a.a.prototype.$copyText(o).then((function(){r.a.success("复制成功")}),(function(){r.a.fail("请更换浏览器复制")}))}catch(t){r.a.fail("请更换浏览器复制")}})).catch((function(){}))})).catch((function(t){r.a.fail(t.message)}))}}},8807:function(t,e,i){"use strict";i("a481"),i("ac6a"),i("456d"),i("7f7f"),i("c5f6"),i("8e6e");var s=i("bd86"),r=i("2f62");function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){Object(s.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var c={props:{type:{type:String,default:"price"},course:{type:Object,default:{}},order:{type:Object,default:{}}},data:function(){return{isFree:0==this.course.price}},computed:n(n({},Object(r.d)(["courseSettings"])),{},{rate:function(){return parseInt(this.course.publishedTaskNum)?parseInt(this.course.progress.percent):0},showStudent:function(){return!this.courseSettings||Number(this.courseSettings.show_student_num_enabled)}}),filters:{numFilter:function(t){return t?parseFloat(t).toFixed(2):""}},methods:{goToPay:function(){this.$router.push({path:"/pay",query:{id:this.order.id,source:"order",sn:this.order.sn,targetId:this.order.targetId,targetType:this.order.targetType}})}}},o=i("a6c2"),l={components:{switchBox:Object(o.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"e-course-switch-box"},["price"===t.type?i("div",{staticClass:"switch-box"},[i("span",{staticClass:"switch-box__price"},[t.isFree?i("p",{staticClass:"free"},[t._v("免费")]):t._e(),t.isFree?t._e():i("p",{staticClass:"price"},[t._v("¥ "+t._s(t.course.price))])]),i("span",{staticClass:"switch-box__state"},[t.showStudent?i("p",[t._v(t._s(t.course.studentNum)+"人在学")]):t._e()])]):t._e(),"order"===t.type?i("div",{staticClass:"switch-box"},[i("span",{staticClass:"switch-box__price"},[t.isFree?i("p",{staticClass:"free"},[t._v("免费")]):t._e(),t.isFree?t._e():i("p",{staticClass:"price"},[t._v("¥ "+t._s(t.order.pay_amount/100))])]),i("span",{staticClass:"switch-box__state"},["created"!==t.order.status&&"paying"!==t.order.status?i("p",{class:t.order.status},[t._v("\n        "+t._s(t._f("filterOrderStatus")(t.order.status))+"\n      ")]):t._e(),"created"===t.order.status||"paying"===t.order.status?i("span",{staticClass:"order-pay",on:{click:t.goToPay}},[t._v(t._s(t._f("filterOrderStatus")(t.order.status)))]):t._e()])]):t._e(),"confirmOrder"===t.type?i("div",{staticClass:"switch-box"},[i("span",{staticClass:"switch-box__price"},[i("p",{staticClass:"price"},[t._v("¥ "+t._s(t._f("numFilter")(t.order.totalPrice)))])])]):t._e(),"rank"===t.type?i("div",{staticClass:"rank-box"},[i("div",{staticClass:"progress round-conner"},[i("div",{staticClass:"curRate round-conner",style:{width:t.rate+"%"}})]),i("span",[t._v(t._s(this.rate)+"%")])]):t._e()])}),[],!1,null,null,null).exports},props:{course:{type:Object,default:function(){return{}}},order:{type:Object,default:function(){return{}}},type:{type:String,default:"price"},feedback:{type:Boolean,default:!0},typeList:{type:String,default:"course_list"},duration:{type:Number,default:0}},data:function(){return{pathName:this.$route.name}},computed:{imgSrc:function(){if("classroom_list"===this.typeList)return this.course.cover.middle;var t=this.course.courseSet,e=t?t.cover.middle:this.order.cover.middle;return e||""},title:function(){return"classroom_list"===this.typeList?this.course.title:this.course.courseSetTitle||(this.course.courseSet?this.course.courseSet.title:"")||this.order.title},teachPlan:function(){return!!this.course.title&&this.course.title},imgClass:function(){return"vip"===this.typeList?"e-vip__img":"e-course__img"},vipDuration:function(){return"month"===this.order.unitType?"".concat(this.duration,"个月"):"year"===this.order.unitType?"".concat(this.duration,"年"):"".concat(this.duration,"天")}},watch:{course:{handler:function(t){var e=t.courseSet;if("miniprogramSetting"===this.pathName&&e)for(var i=Object.keys(e.cover),s=0;s<i.length;s++)e.cover[i[s]]=e.cover[i[s]].replace(/^(\/\/)|(http:\/\/)/,"https://")},immediate:!0}},methods:{onClick:function(t){if(this.feedback&&"vip"!==this.typeList){var e="order"===this.type,i=this.course.id||this.order.targetId;"SPAN"!==t.target.tagName&&(e?location.href=this.order.targetUrl:"course"!==this.typeList&&("classroom_list"===this.typeList&&this.$router.push({path:"/classroom/".concat(i)}),"course_list"===this.typeList&&this.$router.push({path:"/course/".concat(i)})))}}}},u=Object(o.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"e-course"},[i("div",{staticClass:"clearfix",on:{click:t.onClick}},[i("div",{staticClass:"e-course__left pull-left"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgSrc,expression:"imgSrc"}],class:t.imgClass})]),i("div",{staticClass:"e-course__right pull-left"},["confirmOrder"===t.type?i("div",{staticClass:"e-course__title course-confirm-title"},[t._v("\n        "+t._s(t.title)),"vip"===t.typeList?i("span",{staticClass:"grey-medium"},[t._v(" x "+t._s(t.vipDuration))]):t._e()]):i("div",[i("div",{staticClass:"e-course__title text-overflow"},[t._v(t._s(t.title))]),"classroom_list"===t.typeList?i("div",{staticClass:"e-course__count"},[t._v("\n          共 "+t._s(t.course.courseNum)+" 门课程\n        ")]):t._e(),"course_list"===t.typeList?i("div",{staticClass:"e-course__project text-overflow"},[t.teachPlan?i("span",[t._v(t._s(t.teachPlan))]):t._e()]):t._e()]),i("switchBox",{attrs:{type:t.type,course:t.course,order:t.order,"student-num":t.course.studentNum,"published-task-num":t.course.publishedTaskNum}})],1)])])}),[],!1,null,null,null);e.a=u.exports},a262:function(t,e,i){"use strict";var s=i("7067");e.a={methods:{activityHandle:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(s.a)(t,e,i)}}}},b864:function(t,e,i){"use strict";i.r(e),i("8e6e"),i("ac6a"),i("456d");var s=i("bd86"),r=(i("e7e5"),i("d399")),a=i("75fc"),n=i("8807"),c=i("3ce7"),o={components:{eCourse:n.a},data:function(){return{list:[],isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},created:function(){},methods:{onLoad:function(){var t=this,e={offset:this.offset};c.a.getMyOrder({params:e}).then((function(e){var i=e.data,s=e.paging;t.isFirstRequestCompile=!0,t.list=[].concat(Object(a.a)(t.list),Object(a.a)(i)),t.offset=t.list.length,t.list.length==s.total&&(t.finished=!0),t.loading=!1})).catch((function(e){r.a.fail(e.message),t.isFirstRequestCompile=!0,t.loading=!1}))}}},l=i("a6c2"),u=Object(l.a)(o,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orders"},[0===t.list.length&&t.isFirstRequestCompile?i("div",{staticClass:"orders-container__empty"},[i("img",{attrs:{src:"static/images/orderEmpty.png"}}),i("span",[t._v("暂无订单记录")])]):i("div",{staticClass:"order"},[i("van-list",{staticClass:"tab-list",attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return i("e-course",{key:t.id,attrs:{order:t,"type-list":t.targetType,type:"order"}})})),1)],1)])}),[],!1,null,null,null).exports,p=(i("c5f6"),{cut:"砍价",groupon:"拼团",seckill:"秒杀"}),d={cut:"砍",groupon:"团",seckill:"秒"},v={successed:"成功",ongoing:"中",failed:"失败"},f={name:"ActivityItem",mixins:[i("a262").a],props:{activity:{type:Object,default:function(){return{}}}},data:function(){return{type2symbol:d,type2label:p,status2label:v,activityId:Number(this.activity.activityId)}},methods:{viewDetail:function(t){}}},h={components:{activityItem:Object(l.a)(f,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"marketing-groupon activity-cell",on:{click:t.viewDetail}},[i("div",{staticClass:"activity-cell__head"},[i("span",{staticClass:"head-left",class:t.activity.type},[t._v(t._s(t.type2symbol[t.activity.type]))]),i("span",{staticClass:"head-right",class:t.activity.status},[t._v(t._s(t.type2label[t.activity.type]+t.status2label[t.activity.status]))])]),i("div",{staticClass:"activity-cell__body",on:{click:function(e){return t.activityHandle(t.activityId)}}},[i("div",{staticClass:"marketing-groupon__image-container",class:{"marketing-groupon__image-empty":!t.activity.cover}},[t.activity.cover?i("img",{staticClass:"marketing-groupon__image",attrs:{src:t.activity.cover}}):t._e()]),i("div",{staticClass:"marketing-groupon__context e-groupon__context"},[i("div",{staticClass:"context-title text-overflow"},[t._v(t._s(t.activity.name))]),i("div",{staticClass:"context-sale"},[t.activity.price?i("span",{staticClass:"context-sale__sale-price"},[t._v(t._s(t.activity.price)+"元")]):t._e(),t.activity.originPrice?i("span",{staticClass:"context-sale__origin-price"},[t._v(t._s(t.activity.originPrice)+"元")]):t._e(),i("span",{staticClass:"context-sale__shopping"},[t._v(t._s(t.type2label[t.activity.type])+"详情")])])])])])}),[],!1,null,"3fa10c57",null).exports},data:function(){return{list:[],isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},mounted:function(){this.onLoad()},methods:{onLoad:function(){var t=this,e={offset:this.offset};c.a.myActivities({params:e}).then((function(e){var i=e.data,s=e.paging;t.isFirstRequestCompile=!0,t.list=[].concat(Object(a.a)(t.list),Object(a.a)(i)),t.offset=t.list.length,t.list.length==s.total&&(t.finished=!0),t.loading=!1})).catch((function(e){r.a.fail(e.message),t.isFirstRequestCompile=!0,t.loading=!1}))}}},g=Object(l.a)(h,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"orders"},[0===t.list.length&&t.isFirstRequestCompile?i("div",{staticClass:"orders-container__empty"},[i("img",{attrs:{src:"static/images/orderEmpty.png"}}),i("span",[t._v("暂无活动记录")])]):i("div",{staticClass:"activity"},[i("van-list",{staticClass:"tab-list",attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,e){return i("activity-item",{key:e,attrs:{activity:t}})})),1)],1)])}),[],!1,null,null,null).exports,_=i("2f62");function m(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?m(Object(i),!0).forEach((function(e){Object(s.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var b={computed:y(y({},Object(_.d)(["user","vipSwitch"])),{},{vipDated:function(){if(!this.user.vip)return!1;var t=new Date(this.user.vip.deadline).getTime();return(new Date).getTime()>t}}),created:function(){this.getUserInfo()},methods:y({},Object(_.b)(["getUserInfo"]))};function O(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function C(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?O(Object(i),!0).forEach((function(e){Object(s.a)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var w={components:{Orders:u,activity:g,User:Object(l.a)(b,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user"},[i("div",{staticClass:"user-section clearfix"},[i("router-link",{attrs:{to:"/settings"}},[t.user.avatar?i("img",{staticClass:"user-img",attrs:{src:t.user.avatar.large}}):t._e()]),i("div",{class:["user-middle",t.vipSwitch?"":"single-middle"]},[i("div",{staticClass:"user-name"},[t._v(t._s(t.user.nickname))]),t.vipSwitch?i("div",[t.user.vip?i("span",{staticClass:"user-vip"},[i("router-link",{attrs:{to:{path:"/vip",query:{id:t.user.vip.levelId}}}},[i("img",{class:["vip-img",t.vipDated?"vip-expired":""],attrs:{src:t.user.vip.icon}}),t.vipDated?i("span",{staticClass:"grey text-overflow vip-name"},[t._v(t._s(t.user.vip.vipName)+"已过期，"),i("span",{staticClass:"color-primary"},[t._v("重新开通")])]):i("span",{staticClass:"color-primary"},[t._v(t._s(t.user.vip.vipName))])])],1):i("div",[i("router-link",{staticClass:"user-vip",attrs:{to:"/vip"}},[t._v("\n            您还不是会员，"),i("span",{staticClass:"color-primary"},[t._v("去开通")])])],1)]):t._e()]),i("router-link",{staticClass:"user-setting",attrs:{to:"/settings"}},[i("img",{attrs:{src:"static/images/setting.png"}})])],1)])}),[],!1,null,null,null).exports},mixins:[i("5ede").a],data:function(){return{activeIndex:0,tabs:["我的订单","我的活动"],hasBusinessDrainage:!1,isShowDistributorEntrance:!1,drpSetting:{}}},computed:C(C({},Object(_.d)(["DrpSwitch"])),Object(_.d)({isLoading:function(t){return t.isLoading}})),created:function(){var t=this;setTimeout((function(){window.scrollTo(0,0)}),100),c.a.hasPluginInstalled().then((function(e){t.hasBusinessDrainage=e.BusinessDrainage})),this.showDistributorEntrance()},methods:{showDistributorEntrance:function(){this.DrpSwitch?(this.getDrpSetting(),this.getAgencyBindRelation()):this.isShowDistributorEntrance=!1},getAgencyBindRelation:function(){var t=this;c.a.getAgencyBindRelation().then((function(e){e.agencyId?t.isShowDistributorEntrance=!0:t.isShowDistributorEntrance=!1}))},getDrpSetting:function(){var t=this;c.a.getDrpSetting().then((function(e){t.drpSetting=e}))}}},j=Object(l.a)(w,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isLoading?i("e-loading"):t._e(),i("user"),i("router-link",{attrs:{to:{name:"couponCovert"}}},[t.hasBusinessDrainage?i("div",{staticClass:"coupon-code-entrance"},[t._v("\n      兑换卡券\n      "),i("i",{staticClass:"van-icon van-icon-arrow pull-right"})]):t._e()]),t.isShowDistributorEntrance?i("a",{attrs:{href:t.drpSetting.distributor_login_url}},[t._m(0)]):t._e(),i("van-tabs",{staticClass:"after-tabs e-learn",model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.tabs,(function(t,e){return i("van-tab",{key:e,attrs:{title:t}})})),1),i("orders",{directives:[{name:"show",rawName:"v-show",value:0===t.activeIndex,expression:"activeIndex === 0"}]}),i("activity",{directives:[{name:"show",rawName:"v-show",value:1===t.activeIndex,expression:"activeIndex === 1"}]})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"coupon-code-entrance"},[this._v("\n      分销中心\n      "),e("i",{staticClass:"van-icon van-icon-arrow pull-right"})])}],!1,null,null,null);e.default=j.exports}}]);