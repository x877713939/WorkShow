!function(l){function t(t){for(var e,n,i=t[0],s=t[1],r=t[2],a=0,o=[];a<i.length;a++)n=i[a],Object.prototype.hasOwnProperty.call(u,n)&&u[n]&&o.push(u[n][0]),u[n]=0;for(e in s)Object.prototype.hasOwnProperty.call(s,e)&&(l[e]=s[e]);for(h&&h(t);o.length;)o.shift()();return d.push.apply(d,r||[]),c()}function c(){for(var t,e=0;e<d.length;e++){for(var n=d[e],i=!0,s=1;s<n.length;s++){var r=n[s];0!==u[r]&&(i=!1)}i&&(d.splice(e--,1),t=a(a.s=n[0]))}return t}var n={},u={194:0},d=[];function a(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return l[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=l,a.c=n,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/static-dist/";var e=window.webpackJsonp=window.webpackJsonp||[],i=e.push.bind(e);e.push=t,e=e.slice();for(var s=0;s<e.length;s++)t(e[s]);var h=i;d.push([731,0]),c()}({17:function(t,e){t.exports=jQuery},304:function(t,e){t.exports=function(t){var e=t.match(/^(\d{2}):(\d{2}):(\d{2}),(\d{3})$/);if(!e)throw new Error("Invalid SRT time format");var n=parseInt(e[1],10),i=parseInt(e[2],10),t=parseInt(e[3],10);return(n*=36e5)+(i*=6e4)+(t*=1e3)+parseInt(e[4],10)}},352:function(t,e){t.exports=function(t){if(!/^\d+$/.test(t.toString()))throw new Error("Time should be an Integer value in milliseconds");t=parseInt(t);var e=new Date(0,0,0,0,0,0,t),n=e.getHours()<10?"0"+e.getHours():e.getHours(),i=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),e=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),t=t-(36e5*n+6e4*i+1e3*e);return t<100&&10<=t?t="0"+t:t<10&&(t="00"+t),n+":"+i+":"+e+","+t}},380:function(t,e,n){"use strict";
/*!
 * Subtitle.js
 * Parse and manipulate SRT (SubRip)
 * https://github.com/gsantiago/subtitle.js
 *
 * @version 0.1.5
 * @author Guilherme Santiago
*/var i=n(304),s=n(352),r=n(620),a=n(621),o=n(622),l=n(623),c=n(625);function u(t){if(!(this instanceof u))return new u(t);this._subtitles=[],t&&this.parse(t)}t=(t.exports=u).prototype;t.parse=function(t){this._subtitles=r(t)},t.add=function(t){return c(this._subtitles,t),this},t.getSubtitles=function(t){return l(this._subtitles,t)},t.stringify=function(){return a(this._subtitles)},t.resync=function(t){return this._subtitles=o(this._subtitles,t),this},u.toMS=i,u.toSrtTime=s},619:function(t,e){var n="<iframe src='"+$("#lesson-dashboard").data("media-player-url")+"' name='viewerIframe' id='viewerIframe' width='100%'allowfullscreen webkitallowfullscreen height='100%' style='border:0px'></iframe>";$("#lesson-video-content").html(n)},620:function(t,e,n){var l=n(304);t.exports=function(t){var n,i,s,r,a,o=[];if(!t)throw new Error("No SRT to parse");return t=t.trim(),(t=(t+="\n").replace(/\r\n/g,"\n").replace(/\n{3,}/g,"\n\n").split("\n")).forEach(function(t){if(t=t.toString(),n||!/^\d+$/.test(t)){if(!i){var e=t.match(/^(\d{2}:\d{2}:\d{2},\d{3}) --> (\d{2}:\d{2}:\d{2},\d{3})$/);if(e)return r=e[1],a=e[2],void(i=!0)}""===t.trim()?(o.push({index:n,start:r,end:a,duration:l(a)-l(r),text:s||""}),n=i=r=a=s=null):s?s+="\n"+t:s=t}else n=parseInt(t)}),o}},621:function(t,e){t.exports=function(t){var n="";return t.forEach(function(t,e){0<e&&(n+="\n"),n+=t.index,n+="\n",n+=t.start+" --\x3e "+t.end,n+="\n",n+=t.text,n+="\n"}),n}},622:function(t,e,n){var s=n(304),r=n(352);t.exports=function(t,i){if(!/(-|\+)?\d+/.test(i.toString()))throw new Error("Invalid time: "+i+".Expected a valid integer");return i=parseInt(i,10),t.map(function(t){var e=s(t.start),n=s(t.end);return e+=i,n+=i,t.start=r(e<0?0:e),t.end=r(n<0?0:n),t})}},623:function(t,e,n){var i=n(624),s=n(304),r={timeFormat:"srt",duration:!1};t.exports=function(t,e){return"ms"===(e=i(r,e)).timeFormat&&(t=t.map(function(t){return t.start=s(t.start),t.end=s(t.end),t})),e.duration||(t=t.map(function(t){return delete t.duration,t})),t}},624:function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n,i=arguments[e];for(n in i)s.call(i,n)&&(t[n]=i[n])}return t};var s=Object.prototype.hasOwnProperty},625:function(t,e,n){var i=n(304),s=n(352);t.exports=function(t,e){if(!e.start||!e.end||!e.text)throw new Error("Invalid caption data");for(var n in e)if(e.hasOwnProperty(n)&&"text"!==n&&("start"===n||"end"===n)&&!/^(\d{2}):(\d{2}):(\d{2}),(\d{3})$/.test(e[n])){if(!/^\d+$/.test(e[n]))throw new Error("Invalid caption time format");e[n]=s(e[n])}return t.push({index:t.length+1,start:e.start,end:e.end,duration:i(e.end)-i(e.start),text:e.text}),t}},731:function(t,e,n){"use strict";n.r(e);for(var e=n(12),r=n.n(e),e=n(59),s=n.n(e),e=n(0),i=n.n(e),e=n(1),a=n.n(e),e=(n(619),n(6)),o=n.n(e),l=new(n(89).a)({name:"parent",project:"PlayerProject",children:[document.getElementById("viewerIframe")],type:"parent"}),c=n(16),e=$(".js-editbox"),u=$("#editbox-lesson-list"),d=e.data("mediaLength"),h=d/6,p=0;p<=6;p++){var f=$('[data-role="scale-default"]').clone().css("left",m(h*p,d)).removeClass("hidden").removeAttr("data-role");f.find('[data-role="scale-time"]').text(c.i(Math.round(h*p))),$('[data-role="scale-default"]').before(f)}function m(t,e){return 20+t*$("#editbox-lesson-list").width()/o()(e)}l.on("timechange",function(t){$(".scale-white").css("left",m(t.currentTime,d))}),$(".scale-white").on("mousedown",function(t){$(document).on("mousemove.playertime",function(t){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty();var e=t.pageX>u.width()+20?u.width()+20:t.pageX&&t.pageX<=20?20:t.pageX;$(".scale-white").css("left",e);t=e,e=d,e=Math.round((t-20)*e/$("#editbox-lesson-list").width());l.sendToChild({id:"viewerIframe"},"setCurrentTime",{time:e})}).on("mouseup.playertime",function(t){$(document).off("mousemove.playertime"),$(document).off("mousedown.playertime")})});var g={init:function(t){this.$el=$(t.id),this.options=[],this.optionsLimit=t.optionsLimit||!1,this.eventManager={},this.initParent(),this.initEvent()},initParent:function(){var t=$(document.createDocumentFragment());t.append(this.templete()),this.$el.append(t),this.$parentDom=$(".track-select-parent"),this.$list=$(".track-selcet-list"),this.$dataShow=this.$parentDom.find(".data-show"),this.$open=this.$parentDom.find(".track-selcet-open-arrow"),this.$close=this.$parentDom.find(".track-selcet-close-arrow"),this.$showBox=this.$parentDom.find(".track-select-show")},initEvent:function(){var n=this;this.$parentDom.delegate(".track-selcet-open-arrow","click",this.handleOpen.bind(this)).delegate(".track-selcet-close-arrow","click",this.handleClose.bind(this)).delegate(".delete","click",this.handleDelete.bind(this)).delegate(".select-item","click",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");var t=$(this).find(".value").html(),e=$(this).find(".value").attr("url");n.setValue({name:t,url:e}),n.handleClose()}),this.$showBox.on("click",this.toggle.bind(this)),this.on("valuechange",function(){this.$dataShow.html(this.getValue().name),this.$dataShow.attr("title",this.getValue().name)}),this.on("listchange",function(){this.optionsLimit&&this.options.length>=this.optionsLimit&&this.trigger("optionlimit"),this.$list.html(this.getOptionsStr()),this.setValue(this.getDefaultOption())}),this.on("optionempty",this.handleOptionEmpty.bind(this))},templete:function(){return'<div class="track-select-parent">\n              <div class="track-select-show">\n                <div class="data-show" title="'.concat(this.getDefaultOption().name,'"></div>\n                <span class="track-selcet-open-arrow">\n                  <i class="es-icon es-icon-keyboardarrowdown"></i>\n                </span>\n                <span class="track-selcet-close-arrow" style="display:none;">\n                  <i class="es-icon es-icon-keyboardarrowup"></i>\n                </span>\n              </div>\n              <ul class="track-selcet-list" style="display:none;">\n                ').concat(this.getOptionsStr(),"\n              </ul>\n            </div>")},getDefaultOption:function(){return this.options.length?this.options[0]:(this.open&&this.handleClose(),!1)},getOptionsStr:function(){this.options.length||this.trigger("optionempty");var n="";return this.options.map(function(t,e){n+='<li class="select-item">\n                        <div class="value" title="'.concat(t.name,'" url="').concat(t.url,'">\n                          ').concat(t.name,'\n                        </div>\n                        <span class="convertStatus convert-').concat(t.convertStatus,'">').concat((t=t.convertStatus,{waiting:Translator.trans("subtitle.status.waiting"),doing:Translator.trans("subtitle.status.doing"),success:Translator.trans("subtitle.status.success"),error:Translator.trans("subtitle.status.error"),none:Translator.trans("subtitle.status.waiting")}[t]),'</span>\n                        <i class="es-icon es-icon-close01 delete" data-index="').concat(e,'"></i>\n                      </li>')}),n},setValue:function(t){if(!t)return this.$dataShow.html(Translator.trans("subtitle.no_subtitle_hint")),void this.trigger("valuechange",!1);this.value=t,this.trigger("valuechange",this.value)},getValue:function(){return this.value||{name:Translator.trans("subtitle.no_subtitle_hint")}},toggle:function(){this.open?this.handleClose():this.handleOpen()},handleOpen:function(){this.options.length&&(this.open=!0,this.$open.hide(),this.$close.show(),this.$showBox.addClass("active"),this.$list.slideDown(200))},handleClose:function(){this.open=!1,this.$close.hide(),this.$open.show(),this.$showBox.removeClass("active"),this.$list.slideUp(200)},handleDelete:function(t){var e=t.target;$(e).parent().remove(),this.trigger("deleteoption",this.options[$(e).data("index")]),this.options.splice($(e).data("index"),1),this.trigger("listchange",this.options),t.stopPropagation()},handleOptionEmpty:function(){this.value="",this.trigger("valuechange",!1)},on:function(t,e){this.eventManager[t]?this.eventManager[t].push(e.bind(this)):this.eventManager[t]=[e.bind(this)]},trigger:function(t,e){this.eventManager[t]&&this.eventManager[t].map(function(t){t(e)})},resetOptions:function(t){this.options=t,this.trigger("listchange",this.options)},addOption:function(t){t.convertStatus||(t.convertStatus="waiting"),this.options.push(t),this.trigger("listchange")}},v=n(4),e=n(380),b=n.n(e),w=$(".text-track-overview"),y=$("#uploader");new(function(){function t(){i()(this,t),this.select=null,this.init()}return a()(t,[{key:"init",value:function(){this.initTextDisplay(),this.initSelect(),this.initUploader()}},{key:"initTextDisplay",value:function(){var t=$(".manage-edit-body").height(),e=$(".nav-tabs-edit").height(),n=$(".text-track-title").height(),i=$("#track-select").height();w.height(t-e-n-i-140).show()}},{key:"initSelect",value:function(){var t=s()(g),e=$("#track-select").data("subtitleList"),n=y.data("mediaId"),i=this;t.init({id:"#track-select",optionsLimit:4}),t.on("valuechange",function(t){t?$.ajax({url:t.url,type:"GET"}).done(i.showSubtitleContent):w.html(Translator.trans("subtitle.no_subtitle_hint"))}),t.on("deleteoption",function(t){t="/media/".concat(n,"/subtitle/").concat(t.id,"/delete");$.post(t,function(t){t&&(Object(v.a)("success",Translator.trans("subtitle.delete_success_hint")),y.show())})}),t.on("optionlimit",function(){y.hide()}),t.resetOptions(e),this.select=t}},{key:"initUploader",value:function(){var e=this.select,t=y.data("mediaGlobalId"),n=y.data("mediaId"),i=y.data("subtitleCreateUrl"),t=new UploaderSDK({sdkBaseUri:app.cloudSdkBaseUri,disableDataUpload:app.cloudDisableLogReport,disableSentry:app.cloudDisableLogReport,initUrl:y.data("initUrl"),finishUrl:y.data("finishUrl"),id:"uploader",ui:"simple",multi:!0,accept:{extensions:["srt"],mimeTypes:["text/srt"]},type:"sub",process:{common:{videoNo:t}}});t.on("error",function(t){"Q_TYPE_DENIED"===t.error&&Object(v.a)("danger",Translator.trans("subtitle.upload_srt_hint"))}),t.on("file.finish",function(t){$.post(i,{name:t.name,subtitleId:t.no,mediaId:n}).success(function(t){t&&(e.addOption(t),Object(v.a)("success",Translator.trans("subtitle.upload_success_hint")),setTimeout(function(){var t="/media/".concat(n,"/subtitles");$.get(t).done(function(t){t.subtitles&&e.resetOptions(t.subtitles)})},5e3))}).error(function(t){Object(v.a)("danger",Translator.trans(t.responseJSON.error.message))})})}},{key:"showSubtitleContent",value:function(t){var e=new b.a;try{e.parse(t)}catch(t){return Object(v.a)("danger",Translator.trans("subtitle.parse_error_hint")),void w.html(Translator.trans("subtitle.parse_error_hint"))}var i=e.getSubtitles({duration:!0,timeFormat:"ms"}),n="";i.map(function(t){n+="<p>".concat(t.text,"</p>")}),w.html(n);var s=w.find("p");l.on("timechange",function(n){setTimeout(function(){var t=i.find(function(t,e){if(t.start/1e3>n.currentTime)return t});s.removeClass("active"),t&&1<t.index&&i[t.index-2].end>1e3*r()(n.currentTime)&&s.eq(t.index-2).addClass("active")},0)})}}]),t}())}});