!function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/static-dist/",i(i.s=23)}([function(e,t,n){e.exports=!n(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=n(9)},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){var i=n(10);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),i(e,r.key,r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(17),i=n(18),o=n(20),a=Object.defineProperty;t.f=n(0)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(4),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){e.exports=n(11)},function(e,t,n){n(12);var r=n(4).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(13);r(r.S+r.F*!n(0),"Object",{defineProperty:n(7).f})},function(e,t,n){var y=n(6),h=n(4),m=n(14),_=n(16),g=n(22),w="prototype",x=function(e,t,n){var r,i,o,a=e&x.F,u=e&x.G,c=e&x.S,s=e&x.P,l=e&x.B,f=e&x.W,d=u?h:h[t]||(h[t]={}),p=d[w],v=u?y:c?y[t]:(y[t]||{})[w];for(r in u&&(n=t),n)(i=!a&&v&&void 0!==v[r])&&g(d,r)||(o=i?v[r]:n[r],d[r]=u&&"function"!=typeof v[r]?n[r]:l&&i?m(o,y):f&&v[r]==o?function(r){function e(e,t,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,t)}return new r(e,t,n)}return r.apply(this,arguments)}return e[w]=r[w],e}(o):s&&"function"==typeof o?m(Function.call,o):o,s&&((d.virtual||(d.virtual={}))[r]=o,e&x.R&&p&&!p[r]&&_(p,r,o)))};x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128,e.exports=x},function(e,t,n){var o=n(15);e.exports=function(r,i,e){if(o(r),void 0===i)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(7),i=n(21);e.exports=n(0)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(5);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(0)&&!n(8)(function(){return 7!=Object.defineProperty(n(19)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(5),i=n(6).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var i=n(5);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(2),a=n.n(o),u=n(3),c=n.n(u),s=function(){function r(e,t,n){a()(this,r),this.select1=e,this.select2=t,this.object=n,this._initEvent()}return c()(r,[{key:"_initEvent",value:function(){var t=this;this.select1.on("change",function(e){return t._selectChange(e)})}},{key:"_selectChange",value:function(){var e=this.select1.data("url"),t=this.select1.val(),n=this;0!=t?$.post(e,{bankId:t,isTree:!0},function(e){""!=e?(n.select2.find(".js-treeview-data").text(i()(e)),n.select2.find(".js-treeview-ipt").val(""),n.select2.find(".js-treeview-text").val(""),new window.$.CheckTreeviewInput({$elem:n.select2,disableNodeCheck:!0,saveColumn:"id",transportChildren:!0}),n.select2.removeClass("hidden")):n.select2.addClass("hidden")}):this.select2.hide()}}]),r}();function l(){var e=$("#questionBankSelect").data("checkNumUrl"),t=$("#questionBankSelect").val(),n=$('[name="range[categoryIds]"]').val(),r=$('[name="difficulty"]').val();$.post(e,{bankId:t,categoryIds:n,difficulty:r},function(e){$('[role="questionNum"]').text(0),$.each(e,function(e,t){$("[type='"+e+"']").text(t.itemNum)})})}new(function(){function t(e){a()(this,t),this.$element=e,this.validator2=null,this._setValidateRule(),this._init(),this._initEvent()}return c()(t,[{key:"_init",value:function(){this._inItStep2form(),this.fix()}},{key:"_initEvent",value:function(){var t=this;window.ltc.on("getActivity",function(e){window.ltc.emit("returnActivity",{valid:t.validator2.form(),data:window.ltc.getFormSerializeObject($("#step2-form"))})}),window.ltc.on("getValidate",function(e){window.ltc.emit("returnValidate",{valid:t.validator2.form()})})}},{key:"_inItStep2form",value:function(){var e=$("#step2-form");this.validator2=e.validate({rules:{title:{required:!0,maxlength:50,trim:!0,course_title:!0},itemCount:{required:!0,positiveInteger:!0,min:1,max:9999},range:{required:!0},difficulty:{required:!0},"questionTypes[]":{required:!0,remote:{url:$('[name="checkQuestion"]').data("checkUrl"),type:"post",dataType:"json",async:!1,data:{itemCount:function(){return $('[name="itemCount"]').val()},range:function(){var e,t={},n=$('[name="range[bankId]"]').val();return t.bankId=n,0<$('[name="range[categoryIds]"]').length&&(e=$('[name="range[categoryIds]"]').val(),t.categoryIds=e),i()(t)},difficulty:function(){return $('[name="difficulty"]').val()},types:function(){var e=[];return $('[name="questionTypes[]"]:checked').each(function(){e.push($(this).val())}),e}}}}},messages:{required:Translator.trans("activity.exercise_manage.title_required_error_hint"),range:Translator.trans("activity.exercise_manage.title_range_error_hint"),itemCount:{required:Translator.trans("activity.exercise_manage.item_count_required_error_hint"),positiveInteger:Translator.trans("activity.exercise_manage.item_count_positive_integer_error_hint"),min:Translator.trans("activity.exercise_manage.item_count_min_error_hint"),max:Translator.trans("activity.exercise_manage.item_count_max_error_hint")},difficulty:Translator.trans("activity.exercise_manage.difficulty_required_error_hint"),"questionTypes[]":{required:Translator.trans("activity.exercise_manage.question_required_error_hint"),remote:Translator.trans("activity.exercise_manage.question_remote_error_hint")}}})}},{key:"_setValidateRule",value:function(){$.validator.addMethod("positiveInteger",function(e,t){return this.optional(t)||/^[1-9]\d*$/.test(e)},$.validator.format(Translator.trans("activity.exercise_manage.item_count_positive_integer_error_hint")))}},{key:"fix",value:function(){var e=this;$(".js-question-type").click(function(){e.validator2.form()})}}]),t}())($("#step2-form")),l(),$("#questionBankSelect").change(function(){l()}),$('[name="range[categoryIds]"]').change(function(){l()}),$('[name="difficulty"]').change(function(){l()}),$("#questionBankSelect").select2({treeview:!0,dropdownAutoWidth:!0,treeviewInitState:"collapsed",placeholderOption:"first",formatResult:function(e){var t=(e.text+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />");return e.id?'<div class="select2-result-text"><span class="select2-match"></span><span><i class="es-icon es-icon-tiku"></i>'.concat(t,"</span></div>"):t},dropdownCss:{width:""}});var f=new window.$.CheckTreeviewInput({$elem:$("#questionCategorySelect"),disableNodeCheck:!0,saveColumn:"id",transportChildren:!0});new s($("#questionBankSelect"),$("#questionCategorySelect"),f),$(".task-iframe-body").find(".select2-results").css("max-height","180px")}]);