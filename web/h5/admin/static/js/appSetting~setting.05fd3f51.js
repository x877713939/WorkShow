(window.webpackJsonp=window.webpackJsonp||[]).push([["appSetting~setting"],{"28fb":function(e,t,a){"use strict";var i=a("d225"),s=a("b0b4"),o=function(){function e(){Object(i.a)(this,e),this.moduleCounter={}}return Object(s.a)(e,[{key:"getInstance",value:function(){return this.moduleCounter}},{key:"getCounterByType",value:function(e){return this.moduleCounter[e]||0}},{key:"addByType",value:function(e){var t=this.moduleCounter[e];return isNaN(t)||t<0?(this.moduleCounter[e]=1,0):(this.moduleCounter[e]=t+1,this.moduleCounter[e])}},{key:"removeByType",value:function(e){var t=this.moduleCounter[e];return isNaN(t)||t<0?(this.moduleCounter[e]=0,0):(this.moduleCounter[e]=t-1,this.moduleCounter[e])}}]),e}();t.a=o},"515e":function(e,t,a){"use strict";a("28a5"),t.a=function(e,t){for(var a=e.split("."),i=t.split("."),s=a.length,o=i.length,l=Math.min(s,o),n=0;n<l;n+=1){if(a[n]>i[n])return!0;if(a[n]<i[n])return!1}return o<s}},"5b91":function(e,t,a){"use strict";t.a={data:function(){return{createMarketingUrl:"/admin/login/marketing?target=activity_create"}}}},"5e2f":function(e,t,a){"use strict";a("b54a"),a("c5f6"),a("8e6e"),a("ac6a"),a("456d");var i=a("bd86"),s=(a("7f7f"),a("5f16")),o=(a("a481"),a("ded5")),l=a("7e79"),n={name:"SettingCell",props:["customClass","leftClass","rightClass","title"]},r=a("a6c2"),c=Object(r.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"default-item-setting__section clearfix",class:this.customClass},[t("p",{staticClass:"pull-left section-left",class:this.leftClass},[this._v(this._s(this.title))]),t("div",{staticClass:"section-right",class:this.rightClass},[this._t("default")],2)])}),[],!1,null,null,null).exports,u={components:{VueCropper:l.VueCropper,settingCell:c},props:["item","index","active","itemNum","courseSets"],data:function(){return{activeIndex:this.active,option:{img:"",autoCrop:!0,autoCropWidth:375,autoCropHeight:200,fixedNumber:[375,200],fixed:!0,high:!1,enlarge:2},appFixedNumber:[375,150],linkOptions:[{key:0,type:"course_list",label:"选择课程"},{key:1,type:"classroom_list",label:"选择班级"},{key:2,type:"vip",label:"选择会员"}],imageCropped:!1,dialogVisible:!1,pathName:this.$route.name,type:"",radio:"insideLink",linkUrl:""}},computed:{linkTextShow:function(){return"vip"===this.type?"会员专区":this.item.link.target&&this.item.link.target.displayedTitle}},watch:{courseSets:function(e){e.length?this.item.link.target={id:e[0].id,title:e[0].title,courseSetId:e[0].courseSetId,displayedTitle:e[0].displayedTitle}:this.item.link.target=null}},created:function(){this.type=this.item.link.type,"url"===this.item.link.type&&(this.radio="url")},methods:{beforeUpload:function(e){var t=this,a=e.type,i=e.size/1024/1024;if(-1!==a.indexOf("image"))if(i>2)this.$message({message:"文件大小不得超过 2 MB",type:"error"});else{this.dialogVisible=!0;var s=new FileReader;s.onload=function(){t.option.img=s.result},s.readAsDataURL(e)}else this.$message({message:"文件类型仅支持图片格式",type:"error"})},stopCrop:function(){var e=this;this.$refs.cropper.stopCrop(),this.dialogVisible=!1,this.$refs.cropper.getCropData((function(t){e.imageCropped=!0,e.uploadImg(t)}))},uploadImg:function(e){var t=this;if(this.imageCropped){this.imageCropped=!1;var a=new FormData;a.append("file",e),a.append("group","system"),o.a.uploadFile({data:a}).then((function(e){"miniprogramSetting"===t.pathName&&(e.uri=e.uri.replace(/^(\/\/)|(http:\/\/)/,"https://")),t.item.image=e,t.$emit("selected",{selectIndex:t.activeIndex,imageUrl:e.uri}),t.$message({message:"图片上传成功",type:"success"})})).catch((function(e){t.$message({message:e.message,type:"error"})}))}},selected:function(e){this.imgAdress=this.item.image.uri,this.activeIndex=e,this.$emit("selected",{selectIndex:e,imageUrl:this.item.image.uri})},handleRemove:function(e,t,a){e.stopPropagation(),a>1?this.$emit("remove",t):this.$message({message:"至少要留一张轮播图",type:"warning"})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleClose:function(){this.type="",this.$emit("removeCourseLink",this.index)},insideLinkHandle:function(e){this.type=e,this.$emit("chooseCourse",{value:e,index:this.index})},changeLinkUrl:function(e){this.$emit("setOutLink",{type:"url",url:e,index:this.index})}}},d=Object(r.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"carousel-item clearfix",class:{active:e.active===e.index},on:{click:function(t){return e.selected(e.index)}}},[a("el-upload",{staticClass:"add-img",attrs:{"http-request":e.uploadImg,"before-upload":e.beforeUpload,"show-file-list":!1,action:"string",accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:e.item.image.uri,expression:"item.image.uri"}],staticClass:"carousel-img",attrs:{src:e.item.image.uri}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.item.image.uri,expression:"item.image.uri"}],staticClass:"carousel-img-mask"},[e._v("更换图片")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.item.image.uri,expression:"!item.image.uri"}]},[a("i",{staticClass:"text-18"},[e._v("+")]),e._v(" 添加图片")])]),a("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":!0,title:"提示:通过鼠标滚轮缩放图片",width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"setting-carousel-cropper-container"},[a("vueCropper",{directives:[{name:"show",rawName:"v-show",value:e.option.img,expression:"option.img"}],ref:"cropper",attrs:{img:e.option.img,fixed:e.option.fixed,enlarge:e.option.enlarge,"auto-crop":e.option.autoCrop,"fixed-number":"appSetting"===e.pathName?e.appFixedNumber:e.option.fixedNumber,"auto-crop-width":e.option.autoCropWidth,"auto-crop-height":e.option.autoCropHeight}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.stopCrop}},[e._v("确 定")])],1)]),a("img",{directives:[{name:"show",rawName:"v-show",value:e.active===e.index,expression:"active === index"}],staticClass:"icon-delete",attrs:{src:"static/images/delete.png"},on:{click:function(t){return e.handleRemove(t,e.index,e.itemNum)}}}),"appSetting"!==e.pathName?a("div",{staticClass:"add-title"},[e._v("标题："),a("el-input",{attrs:{size:"mini",placeholder:"请输入标题","max-length":"15",clearable:""},model:{value:e.item.title,callback:function(t){e.$set(e.item,"title",t)},expression:"item.title"}})],1):e._e(),"appSetting"!==e.pathName?a("div",{staticClass:"add-choose"},[e._v("\n    链接："),a("el-radio",{attrs:{label:"insideLink"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("站内链接")])],1):a("div",{staticClass:"add-choose"},[a("el-radio",{staticClass:"mt16",attrs:{label:"insideLink"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("站内链接")]),a("el-radio",{staticClass:"mt16",attrs:{label:"url"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("自定义链接")])],1),"insideLink"===e.radio?a("div",{staticClass:"add-inner"},[a("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:!e.linkTextShow,expression:"!linkTextShow"}]},[a("el-button",{staticClass:"el-dropdown-link",attrs:{size:"mini"}},[e._v("\n        添加链接\n      ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.linkOptions,(function(t){return a("el-dropdown-item",{key:t.key,nativeOn:{click:function(a){return e.insideLinkHandle(t.type)}}},[e._v(e._s(t.label))])})),1)],1),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.linkTextShow,expression:"linkTextShow"}],staticClass:"courseLink",attrs:{"disable-transitions":!0,closable:""},on:{close:e.handleClose}},[a("el-tooltip",{staticClass:"text-content ellipsis",attrs:{effect:"dark",placement:"top"}},[a("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.linkTextShow))]),a("span",[e._v(e._s(e.linkTextShow))])])],1)],1):e._e(),"url"===e.radio?a("div",{staticClass:"add-outter"},[a("div",{staticClass:"pull-left add-outter-title"},[e._v("输入网址：")]),a("el-input",{staticClass:"pull-right",attrs:{size:"mini",placeholder:"例如 http://www.eduosho.com",clearable:""},on:{change:e.changeLinkUrl},model:{value:e.item.link.url,callback:function(t){e.$set(e.item.link,"url",t)},expression:"item.link.url"}})],1):e._e()],1)}),[],!1,null,null,null).exports,p={props:{containerClass:{type:String,default:""},isActive:{type:Boolean,default:!1},isIncomplete:{type:Boolean,default:!1}},data:function(){return{pathName:this.$route.name,windowHeight:document.documentElement.clientHeight,settingStyle:{}}},mounted:function(){"h5Setting"===this.pathName&&(this.settingStyle={height:this.windowHeight+"px",overflow:"auto",background:"#ffffff"})}},m=Object(r.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"module-frame",class:e.containerClass},[[a("div",{staticClass:"module-frame__preview",class:{active:e.isActive,incomplete:e.isIncomplete}},[e._t("preview")],2)],[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"module-frame__setting",style:e.settingStyle},[e._t("setting")],2)],e._t("modal")],2)}),[],!1,null,null,null).exports,g=a("75fc"),h=(a("6762"),a("2fdb"),a("5b91")),v=a("310e"),f=a.n(v),y={open_course_list:[{col:5,title:"课程名称",label:"title"},{col:5,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],course_list:[{col:5,title:"课程名称",label:"displayedTitle"},{col:3,title:"商品价格",label:"price"},{col:3,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],classroom_list:[{col:4,title:"班级名称",label:"title"},{col:2,title:"商品价格",label:"price"},{col:2,title:"课程数量",label:"courseNum"},{col:3,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],groupon:[{col:4,title:"活动名称",label:"name"},{col:1,title:"商品原价",label:"rule",subProperty:"originPrice"},{col:1,title:"团长价格",label:"rule",subProperty:"ownerPrice"},{col:1,title:"团员价格",label:"rule",subProperty:"memberPrice"},{col:3,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],cut:[{col:3,title:"活动名称",label:"name"},{col:2,title:"商品原价",label:"originPrice"},{col:1,title:"最低售价",label:"rule",subProperty:"lowestPrice"},{col:1,title:"砍价次数",label:"rule",subProperty:"times"},{col:3,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],seckill:[{col:3,title:"活动名称",label:"name"},{col:2,title:"商品原价",label:"rule",subProperty:"originPrice"},{col:1,title:"秒杀价",label:"rule",subProperty:"seckillPrice"},{col:1,title:"商品个数",label:"rule",subProperty:"productSum"},{col:3,title:"创建时间",label:"createdTime"},{col:0,title:"操作",label:"delete"}],coupon:[{col:3,title:"优惠券名称",label:"name"},{col:2,title:"前缀",label:"prefix"},{col:3,title:"优惠内容",label:"rate"},{col:1,title:"剩余/总量",label:"generatedNum"},{col:1,title:"有效期至",label:"deadline"},{col:0,title:"操作",label:"delete"}]},b=a("0d25"),_=function(e,t,a){var i=a?a.toLocaleLowerCase():t.toLocaleLowerCase(),s=a?e[t][a]:e[t];if(i.includes("price"))return s?"".concat(s,"元"):"未设置";switch(t){case"deadline":if(e.deadlineMode&&"day"===e.deadlineMode)return"领取".concat(e.fixedDay,"天后有效");if(!e.deadline)return"未知日期";var o=new Date(e.deadline);return Object(b.formatTime)(o).slice(0,10);case"createdTime":if(!e.createdTime)return"未知日期";var l=new Date(e.createdTime);return Object(b.formatTime)(l);case"delete":return"移除";case"generatedNum":return"".concat(e.unreceivedNum," / ").concat(e.generatedNum);case"rate":var n="折扣",r="折",c=e.targetDetail.numType,u=e.targetDetail.product,d="全部商品";if("single"===c)switch(u){case"course":case"classroom":d="指定商品";break;case"vip":d="指定会员";break;default:d=""}else if("all"===c)switch(u){case"course":d="全部课程";break;case"classroom":d="全部班级";break;case"all":d="全部商品";break;case"vip":d="全部会员";break;default:d=""}else switch(u){case"course":case"classroom":d="部分商品";break;default:d=""}return"minus"===e.type&&(n="抵价",r="元"),"".concat(n+e.rate+r," / ").concat(d);default:return a?e[t][a]:e[t]}},C={name:"course-table",components:{draggable:f.a},props:{courseList:{type:Array,default:[]},type:{type:String,default:"course_list"}},data:function(){return{head:y}},computed:{courseSets:{get:function(){return this.courseList},set:function(e){this.$emit("updateCourses",e)}}},filters:{tableFilter:_},methods:{tdClass:function(e){return"td-col-".concat(e)},deleteItem:function(e,t){e&&(this.courseSets.splice(t,1),this.courseSets=this.courseSets)}}},w=Object(r.a)(C,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"course-table"},[a("div",{staticClass:"course-table__th"},e._l(e.head[e.type],(function(t,i){return a("span",{key:i,staticClass:"course-table__td",class:e.tdClass(t.col)},[e._v(e._s(t.title))])})),0),a("draggable",{model:{value:e.courseSets,callback:function(t){e.courseSets=t},expression:"courseSets"}},e._l(e.courseSets,(function(t,i){return a("div",{key:i,staticClass:"course-table__tr"},[a("div",{staticClass:"tr-content"},[e._l(e.head[e.type],(function(s,o){return[0!==o?a("span",{staticClass:"course-table__td text-overflow course-table__td-space",class:[e.tdClass(s.col),{delete:"delete"===s.label}],on:{click:function(t){return e.deleteItem("delete"===s.label,i)}}},[e._v("\n            "+e._s(e._f("tableFilter")(t,s.label,s.subProperty)))]):e._e(),0===o?a("el-tooltip",{class:["text-content","td-col-"+s.col],attrs:{disabled:t[s.label].length<=20,placement:"top-start",effect:"dark"}},[a("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e._f("tableFilter")(t,s.label)))]),a("span",{staticClass:"course-table__td text-overflow"},[e._v(e._s(e._f("tableFilter")(t,s.label)))])]):e._e()]}))],2)])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.courseSets.length,expression:"!courseSets.length"}],staticClass:"course-table__empty"},[e._v("暂无数据")])],1)}),[],!1,null,null,null).exports,D=a("2f62");function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M={name:"course-modal",mixins:[h.a],components:{courseTable:w},props:{courseList:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},limit:{default:""},type:{type:String,default:"course_list"}},data:function(){return{tableKey:0,keyWord:"",courseSets:this.courseList,courseListIds:[],valueDefault:s.h,typeTextDefault:s.g,hideLoading:!1}},computed:{modalVisible:{get:function(){return this.visible},set:function(e){this.$emit("visibleChange",e)}},valueKey:function(){return this.valueDefault[this.type].key},typeText:function(){return this.typeTextDefault[this.type].text}},watch:{visible:function(e){e&&(this.tableKey++,this.courseSets=this.courseList,this.restoreListIds(),this.keyWord="")}},created:function(){this.restoreListIds()},methods:x(x({},Object(D.b)(["getCourseList","getClassList","getMarketingList","getCouponList","getOpenCourseList"])),{},{restoreListIds:function(){this.courseListIds=[];for(var e=0;e<this.courseSets.length;e++)this.courseListIds.push(this.courseSets[e].id)},getUpdatedCourses:function(e){this.courseSets=e,this.restoreListIds()},beforeCloseHandler:function(){this.modalVisible=!1},saveHandler:function(){this.modalVisible=!1,this.courseSets.length&&this.$emit("updateCourses",this.courseSets)},selectHandler:function(e){this.courseSets.length>=window.parseInt(this.limit,10)?this.$message({message:"当前最多可选 ".concat(this.limit," 个").concat(this.typeText),type:"warning"}):this.courseListIds.includes(e.id)?this.$message({message:"重复添加了哦",type:"warning"}):(this.courseListIds.push(e.id),this.courseSets=[].concat(Object(g.a)(this.courseSets),[e]))},searchHandler:function(e,t){var a=this,i=function(e,t){return{open_course_list:{apiName:"getOpenCourseList",params:{title:t}},classroom_list:{apiName:"getClassList",params:{title:t}},course_list:{apiName:"getCourseList",params:{courseSetTitle:t}},groupon:{apiName:"getMarketingList",params:{name:t,statuses:"ongoing,unstart",type:e}},coupon:{apiName:"getCouponList",params:{name:t,unexpired:1,unreceivedNumGt:0}},cut:{apiName:"getMarketingList",params:{name:t,statuses:"ongoing,unstart",type:e}},seckill:{apiName:"getMarketingList",params:{name:t,statuses:"ongoing,unstart",type:e,productRemaind_GT:"0"}}}}(this.type,e);this.hideLoading=!1,this[i[this.type].apiName](i[this.type].params).then((function(e){t(e.data)})).catch((function(e){a.hideLoading=!0,a.$message({message:e.message,type:"error"})}))}})},O=Object(r.a)(M,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{width:"90%",visible:e.modalVisible,"before-close":e.beforeCloseHandler,"close-on-click-modal":!1},on:{"update:visible":function(t){e.modalVisible=t}}},[a("div",{staticClass:"course-modal__header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header__title"},[e._v("选择"+e._s(e.typeText))]),a("span",{staticClass:"header__subtitle"},[e._v("仅显示"+e._s("coupon"===e.type?"未过期的":"已发布")+e._s(e.typeText))]),["groupon","seckill","cut"].includes(e.type)?a("a",{staticClass:"color-primary pull-right text-12 mrl",attrs:{href:e.createMarketingUrl+"_"+e.type,target:"_blank"}},[e._v("创建活动")]):e._e()]),a("div",{staticClass:"course-modal__body"},[a("div",{staticClass:"search__container"},[a("span",{staticClass:"search__label"},[e._v("选择"+e._s(e.typeText)+"：")]),a("el-autocomplete",{staticClass:"inline-input search__input",attrs:{size:"medium",placeholder:"搜索"+e.typeText,"value-key":e.valueKey,clearable:!0,autofocus:!0,"hide-loading":e.hideLoading,"trigger-on-focus":!1,"fetch-suggestions":e.searchHandler},on:{select:e.selectHandler},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}})],1),a("div",{staticClass:"help-text mbs"},[e._v("拖动"+e._s(e.typeText)+"名称可调整排序")])]),a("course-table",{key:e.tableKey,attrs:{courseList:e.courseSets,type:e.type},on:{updateCourses:e.getUpdatedCourses}}),a("span",{staticClass:"course-modal__footer dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"text-14 btn-border-primary",attrs:{size:"small"},on:{click:function(t){e.modalVisible=!1}}},[e._v("取 消")]),a("el-button",{staticClass:"text-14",attrs:{type:"primary",size:"small"},on:{click:e.saveHandler}},[e._v("保 存")])],1)],1)}),[],!1,null,null,null).exports,T={name:"e-suggest",props:{suggest:{type:Array,default:function(){return[]}}},methods:{prev:function(){this.$refs.suggestCarousel.prev()},next:function(){this.$refs.suggestCarousel.next()}}},I=Object(r.a)(T,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setting-tip"},[e.suggest.length>=2?[a("div",{staticClass:"tip__arrow tip__left",on:{click:e.prev}},[a("i",{staticClass:"iconfont icon-arrow-left"})]),a("div",{staticClass:"tip__arrow tip__right",on:{click:e.next}},[a("i",{staticClass:"iconfont icon-arrow-right"})])]:e._e(),a("el-carousel",{ref:"suggestCarousel",attrs:{interval:-1,arrow:"never",autoplay:!1,"indicator-position":"none",height:"auto","initial-index":0}},e._l(e.suggest,(function(t){return a("el-carousel-item",{key:t},[a("div",{staticClass:"setting-tip__main"},[a("div",{staticClass:"setting-tip__title"},[a("i",{staticClass:"iconfont icon-jianyi"}),e._v("装修小建议：\n            ")]),a("div",{staticClass:"setting-tip__content"},[e._v(e._s(t))])])])})),1)],2)}),[],!1,null,null,null).exports;function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}var j={components:{item:d,moduleFrame:m,courseModal:O,"e-suggest":I},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{activeItemIndex:0,modalVisible:!1,courseSets:[],type:"course_list",pathName:this.$route.name}},computed:{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){}},carouselImage:function(){return this.copyModuleData.data[this.activeItemIndex]&&this.copyModuleData.data[this.activeItemIndex].image.uri},carouselTitle:function(){return this.copyModuleData.data[this.activeItemIndex]&&this.copyModuleData.data[this.activeItemIndex].title},itemNum:function(){return this.copyModuleData.data.length},addBtnShow:function(){return this.itemNum<5}},watch:{copyModuleData:{handler:function(e){this.$emit("updateModule",e)},deep:!0}},methods:{addItem:function(){var e=JSON.stringify(s.f.slideShow.data[0]),t=JSON.parse(e);this.copyModuleData.data.push(t)},selected:function(e){this.activeItemIndex=e.selectIndex},getUpdatedCourses:function(e){var t=this.copyModuleData.data[this.activeItemIndex].link;if("classroom_list"===this.type)return this.courseSets[this.activeItemIndex]=[{id:e[0].id,title:e[0].title,displayedTitle:e[0].title}],void(t.type="classroom");this.courseSets[this.activeItemIndex]=[{id:e[0].id,courseSetId:e[0].courseSet.id,title:e[0].title||e[0].courseSetTitle,displayedTitle:e[0].displayedTitle}],t.type="course"},modalVisibleHandler:function(e){this.modalVisible=e},openModal:function(e){var t=e.value,a=e.index;"vip"!==t?this.modalVisible=!0:this.copyModuleData.data[a].link.type="vip",this.type=t,this.activeItemIndex=a},itemRemove:function(e){this.activeItemIndex=e-1,this.copyModuleData.data.splice(e,1)},removeCourseLink:function(e){this.type="",this.copyModuleData.data[e].link.type="",this.copyModuleData.data[e].link.target=null,this.courseSets[this.activeItemIndex]=[]},setOutLink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index;this.copyModuleData.data[t].link=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)}}},L=Object(r.a)(j,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("module-frame",{attrs:{"is-active":e.isActive,"is-incomplete":e.isIncomplete,"container-class":"setting-carousel"}},[a("div",{staticClass:"carousel-image-container",class:{"carousel-image-container__app":"appSetting"===e.pathName},attrs:{slot:"preview"},slot:"preview"},[a("img",{directives:[{name:"show",rawName:"v-show",value:e.carouselImage,expression:"carouselImage"}],staticClass:"carousel-image",attrs:{src:e.carouselImage}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.carouselImage,expression:"!carouselImage"}],staticClass:"image-mask",class:{"image-mask__app":"appSetting"===e.pathName}},[e._v("\n      轮播图\n    ")]),"appSetting"!==e.pathName?a("div",{staticClass:"carousel-title ellipsis"},[e._v(e._s(e.carouselTitle))]):e._e()]),a("div",{staticClass:"carousel-allocate",attrs:{slot:"setting"},slot:"setting"},[e.moduleData.tips?a("e-suggest",{key:e.moduleData.moduleType,attrs:{suggest:e.moduleData.tips}}):e._e(),a("header",{staticClass:"title"},[e._v("\n      轮播图设置\n      "),"appSetting"!==e.pathName?a("div",{staticClass:"help-text"},[e._v("建议图片尺寸为750x400px，支持 jpg/png/gif 格式，大小不超过2MB")]):a("div",{staticClass:"help-text"},[e._v("建议图片尺寸为750x300px，支持 jpg/png/gif 格式，大小不超过2MB")])]),e._l(e.copyModuleData.data,(function(t,i){return a("div",{key:i},[a("item",{attrs:{item:t,index:i,active:e.activeItemIndex,"item-num":e.itemNum,"course-sets":e.courseSets[i]},on:{selected:e.selected,chooseCourse:e.openModal,remove:e.itemRemove,removeCourseLink:e.removeCourseLink,setOutLink:e.setOutLink}})],1)})),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addBtnShow,expression:"addBtnShow"}],staticClass:"btn-add-item",attrs:{type:"info",size:"medium"},on:{click:e.addItem}},[e._v("添加一个轮播图")])],2),a("course-modal",{attrs:{slot:"modal",type:["course_list","classroom_list"].includes(e.type)?e.type:"course_list",visible:e.modalVisible,"course-list":e.courseSets[e.activeItemIndex]||[],limit:"1"},on:{visibleChange:e.modalVisibleHandler,updateCourses:e.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports,N=(a("6b54"),a("55dd"),a("062f")),$=a("bd34"),P=a("92a2");function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B={course_list:"课程",classroom_list:"班级"},H={components:{"e-course-list":N.a,draggable:f.a,courseModal:O,moduleFrame:m,settingCell:c,"e-suggest":I},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{modalVisible:!1,limitOptions:[1,2,3,4,5,6,7,8],type:this.moduleData.type,layoutOptions:[{value:"row",label:"一行一列"},{value:"distichous",label:"一行两列"}],sortOptions:[{value:"-studentNum",label:"加入最多"},{value:"-createdTime",label:"最近创建"},{value:"-rating",label:"评分最高"},{value:"recommendedSeq",label:"推荐".concat(B[this.moduleData.type])}],cascaderProps:{label:"name",value:"id"},pathName:this.$route.name,categoryTempId:this.moduleData.data.categoryIdArray||["0"],categoryDiggered:!1,dateOptions:[{value:"7",label:"最近7天"},{value:"30",label:"最近30天"},{value:"90",label:"最近90天"},{value:"0",label:"历史所有"}]}},computed:A(A({},Object(D.c)(["courseCategories","classCategories"])),{},{typeLabel:function(){return B[this.type]},isActive:{get:function(){return this.active},set:function(){}},uiStyle:{get:function(){return"miniprogramSetting"===this.$route.name||"miniprogramSetting"===this.$route.query.from?"old":"new"}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){}},showDateOptions:function(){var e=this.moduleData.data.sort===this.sortOptions[1].value,t=this.moduleData.data.sort===this.sortOptions[3].value;return(e||t)&&(this.moduleData.data.lastDays="0"),!e&&!t},sourceType:{get:function(){return this.copyModuleData.data.sourceType},set:function(e){this.copyModuleData.data.sourceType=e}},sort:{get:function(){return this.copyModuleData.data.sort},set:function(e){this.copyModuleData.data.sort=e}},displayStyle:{get:function(){return this.copyModuleData.data.displayStyle},set:function(e){this.copyModuleData.data.displayStyle=e}},lastDays:{get:function(){return this.copyModuleData.data.lastDays.toString()},set:function(e){this.copyModuleData.data.lastDays=e}},limit:{get:function(){return this.copyModuleData.data.limit},set:function(e){this.copyModuleData.data.limit=e}},categoryId:{get:function(){return this.copyModuleData.data.categoryId},set:function(e){this.copyModuleData.data.categoryId=e}},portal:function(){return P.a[this.pathName]}}),watch:{copyModuleData:{handler:function(e){this.$emit("updateModule",e)},deep:!0},categoryTempId:{handler:function(e){if(e.length){var t=e.length-1;this.moduleData.data.categoryIdArray=e,this.moduleData.data.categoryId=e[t]}}},courseCategories:{handler:function(e){var t=this;e&&!this.categoryDiggered&&(Object($.a)(e,(function(e,a){return a&&t.categoryTempId,e})),this.categoryDiggered=!0)},immediate:!0},classCategories:{handler:function(e){var t=this;e&&!this.categoryDiggered&&(Object($.a)(e,(function(e,a){return a&&t.categoryTempId,e})),this.categoryDiggered=!0,this.categoryTempId=["0"])},immediate:!0},sourceType:function(e){this.limit="condition"===e?4:8}},methods:A(A({},Object(D.b)(["getCourseList","getClassList"])),{},{getUpdatedCourses:function(e){this.copyModuleData.data.items=e},modalVisibleHandler:function(e){this.modalVisible=e},openModal:function(){this.modalVisible=!0},deleteCourse:function(e){this.copyModuleData.data.items.splice(e,1)},fetchCourse:function(e){var t=this,a=e.params;e.index,"custom"!==this.sourceType&&("course_list"!==this.type?this.getClassList(a).then((function(e){t.moduleData.data.items=e.data})).catch((function(e){t.$message({message:e.message,type:"error"})})):this.getCourseList(a).then((function(e){t.moduleData.data.items=e.data})).catch((function(e){t.$message({message:e.message,type:"error"})})))}})},F=Object(r.a)(H,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("module-frame",{attrs:{"is-active":e.isActive,"is-incomplete":e.isIncomplete,"container-class":"setting-course"}},[a("div",{staticClass:"find-page__part",attrs:{slot:"preview"},slot:"preview"},[a("e-course-list",{attrs:{"course-list":e.copyModuleData.data,feedback:!1,"type-list":e.type,"show-mode":"admin",uiStyle:e.uiStyle},on:{fetchCourse:e.fetchCourse}})],1),a("div",{attrs:{slot:"setting"},slot:"setting"},[e.moduleData.tips?a("e-suggest",{key:e.moduleData.moduleType,attrs:{suggest:e.moduleData.tips}}):e._e(),a("header",{staticClass:"title"},[e._v("\n      "+e._s(e.typeLabel)+"列表设置\n      "),"miniprogram"===e.portal&&"班级"===e.typeLabel?a("div",{staticClass:"text-12 color-gray mts"},[e._v("使用班级配置功能，小程序版本需要升级到1.3.1及以上")]):e._e()]),a("div",{staticClass:"default-allocate__content clearfix"},[a("setting-cell",{attrs:{title:"列表名称：","left-class":"required-option"}},[a("el-input",{attrs:{size:"mini","max-length":"15",placeholder:"请输入列表名称",clearable:""},model:{value:e.copyModuleData.data.title,callback:function(t){e.$set(e.copyModuleData.data,"title",t)},expression:"copyModuleData.data.title"}})],1),"miniprogram"!==e.portal?a("setting-cell",{attrs:{title:"排列方式："}},[a("el-select",{attrs:{placeholder:"排列方式",size:"mini"},model:{value:e.displayStyle,callback:function(t){e.displayStyle=t},expression:"displayStyle"}},e._l(e.layoutOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),a("setting-cell",{attrs:{title:e.typeLabel+"来源："}},[a("el-radio",{attrs:{label:"condition"},model:{value:e.sourceType,callback:function(t){e.sourceType=t},expression:"sourceType"}},[e._v(e._s(e.typeLabel)+"分类")]),a("el-radio",{attrs:{label:"custom"},model:{value:e.sourceType,callback:function(t){e.sourceType=t},expression:"sourceType"}},[e._v("自定义")])],1),a("setting-cell",{attrs:{title:e.typeLabel+"分类："}},[a("el-cascader",{directives:[{name:"show",rawName:"v-show",value:"condition"===e.sourceType,expression:"sourceType === 'condition'"}],attrs:{options:"course_list"===e.type?e.courseCategories:e.classCategories,props:e.cascaderProps,size:"mini",placeholder:"请输入列表名称",filterable:"","change-on-select":""},model:{value:e.categoryTempId,callback:function(t){e.categoryTempId=t},expression:"categoryTempId"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:"custom"===e.sourceType,expression:"sourceType === 'custom'"}],staticClass:"required-option"},[a("el-button",{attrs:{size:"mini"},on:{click:e.openModal}},[e._v("选择"+e._s(e.typeLabel))])],1)],1),a("draggable",{directives:[{name:"show",rawName:"v-show",value:"custom"===e.sourceType&&e.copyModuleData.data.items.length,expression:"sourceType === 'custom' && copyModuleData.data.items.length"}],staticClass:"default-draggable__list",model:{value:e.copyModuleData.data.items,callback:function(t){e.$set(e.copyModuleData.data,"items",t)},expression:"copyModuleData.data.items"}},e._l(e.copyModuleData.data.items,(function(t,i){return a("div",{key:i,staticClass:"default-draggable__item"},[a("div",{staticClass:"default-draggable__title text-overflow"},[e._v(e._s(t.displayedTitle||t.title))]),a("i",{staticClass:"h5-icon h5-icon-cuowu1 default-draggable__icon-delete",on:{click:function(t){return e.deleteCourse(i)}}})])})),0),a("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"condition"===e.sourceType,expression:"sourceType === 'condition'"}],attrs:{title:"排列顺序："}},[a("div",{staticClass:"section-right__item pull-left"},[a("el-select",{attrs:{placeholder:"顺序",size:"mini"},model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}},e._l(e.sortOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showDateOptions,expression:"showDateOptions"}],staticClass:"section-right__item pull-right"},[a("el-select",{attrs:{placeholder:"时间区间",size:"mini"},model:{value:e.lastDays,callback:function(t){e.lastDays=t},expression:"lastDays"}},e._l(e.dateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"condition"===e.sourceType,expression:"sourceType === 'condition'"}],attrs:{title:"显示个数："}},[a("el-select",{attrs:{placeholder:"请选择个数",size:"mini"},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}},e._l(e.limitOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("course-modal",{attrs:{slot:"modal",visible:e.modalVisible,limit:e.limit,type:e.type,"course-list":e.copyModuleData.data.items},on:{visibleChange:e.modalVisibleHandler,updateCourses:e.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports;function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z={open_course_list:"课程"},q={components:{"e-openCourse-list":a("48dd").a,draggable:f.a,courseModal:O,moduleFrame:m,settingCell:c,"e-suggest":I},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{modalVisible:!1,limitOptions:[1,2,3,4,5,6,7,8],type:this.moduleData.type,cascaderProps:{label:"name",value:"id"},pathName:this.$route.name,categoryTempId:this.moduleData.data.categoryIdArray||["0"],categoryDiggered:!1,dateOptions:[{value:"7",label:"前后7天"},{value:"30",label:"前后30天"},{value:"90",label:"前后90天"},{value:"0",label:"所有"}]}},computed:E(E({},Object(D.c)(["courseCategories"])),{},{typeLabel:function(){return z[this.type]},isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){}},sourceType:{get:function(){return this.copyModuleData.data.sourceType},set:function(e){this.copyModuleData.data.sourceType=e}},displayStyle:{get:function(){return this.copyModuleData.data.displayStyle},set:function(e){this.copyModuleData.data.displayStyle=e}},limitDays:{get:function(){return this.copyModuleData.data.limitDays.toString()},set:function(e){this.copyModuleData.data.limitDays=e}},limit:{get:function(){return this.copyModuleData.data.limit},set:function(e){this.copyModuleData.data.limit=e}},categoryId:{get:function(){return this.copyModuleData.data.categoryId},set:function(e){this.copyModuleData.data.categoryId=e}},portal:function(){return P.a[this.pathName]}}),watch:{copyModuleData:{handler:function(e){this.$emit("updateModule",e)},deep:!0},categoryTempId:{handler:function(e){if(e.length){var t=e.length-1;this.moduleData.data.categoryIdArray=e,this.moduleData.data.categoryId=e[t]}}},courseCategories:{handler:function(e){var t=this;e&&!this.categoryDiggered&&(Object($.a)(e,(function(e,a){return a&&t.categoryTempId,e})),this.categoryDiggered=!0)},immediate:!0},sourceType:function(e){this.limit="condition"===e?4:8}},methods:E(E({},Object(D.b)(["getOpenCourseList"])),{},{getUpdatedCourses:function(e){this.copyModuleData.data.items=e},modalVisibleHandler:function(e){this.modalVisible=e},openModal:function(){this.modalVisible=!0},deleteCourse:function(e){this.copyModuleData.data.items.splice(e,1)},fetchCourse:function(e){var t=this,a=e.params;e.index,"custom"!==this.sourceType&&this.getOpenCourseList(a).then((function(e){t.moduleData.data.items=e.data})).catch((function(e){t.$message({message:e.message,type:"error"})}))}})},G=Object(r.a)(q,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("module-frame",{attrs:{"is-active":e.isActive,"is-incomplete":e.isIncomplete,"container-class":"setting-course"}},[a("div",{staticClass:"find-page__part",attrs:{slot:"preview"},slot:"preview"},[a("e-openCourse-list",{attrs:{"course-list":e.copyModuleData.data,feedback:!1,"type-list":e.type,"show-mode":"admin"},on:{fetchCourse:e.fetchCourse}})],1),a("div",{attrs:{slot:"setting"},slot:"setting"},[e.moduleData.tips?a("e-suggest",{attrs:{suggest:e.moduleData.tips}}):e._e(),a("header",{staticClass:"title"},[e._v("\n      公开课列表设置\n      "),a("div",{staticClass:"text-12 color-gray mts"},[e._v("注意：仅含直播公开课内容，不包含录播公开课")])]),a("div",{staticClass:"default-allocate__content clearfix"},[a("setting-cell",{attrs:{title:"列表名称：","left-class":"required-option"}},[a("el-input",{attrs:{size:"mini","max-length":"15",placeholder:"请输入列表名称",clearable:""},model:{value:e.copyModuleData.data.title,callback:function(t){e.$set(e.copyModuleData.data,"title",t)},expression:"copyModuleData.data.title"}})],1),a("setting-cell",{attrs:{title:e.typeLabel+"来源："}},[a("el-radio",{attrs:{label:"condition"},model:{value:e.sourceType,callback:function(t){e.sourceType=t},expression:"sourceType"}},[e._v(e._s(e.typeLabel)+"分类")]),a("el-radio",{attrs:{label:"custom"},model:{value:e.sourceType,callback:function(t){e.sourceType=t},expression:"sourceType"}},[e._v("自定义")])],1),a("setting-cell",{attrs:{title:e.typeLabel+"分类："}},[a("el-cascader",{directives:[{name:"show",rawName:"v-show",value:"condition"===e.sourceType,expression:"sourceType === 'condition'"}],attrs:{options:e.courseCategories,props:e.cascaderProps,size:"mini",placeholder:"请输入列表名称",filterable:"","change-on-select":""},model:{value:e.categoryTempId,callback:function(t){e.categoryTempId=t},expression:"categoryTempId"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:"custom"===e.sourceType,expression:"sourceType === 'custom'"}],staticClass:"required-option"},[a("el-button",{attrs:{size:"mini"},on:{click:e.openModal}},[e._v("选择"+e._s(e.typeLabel))])],1)],1),a("draggable",{directives:[{name:"show",rawName:"v-show",value:"custom"===e.sourceType&&e.copyModuleData.data.items.length,expression:"sourceType === 'custom' && copyModuleData.data.items.length"}],staticClass:"default-draggable__list",model:{value:e.copyModuleData.data.items,callback:function(t){e.$set(e.copyModuleData.data,"items",t)},expression:"copyModuleData.data.items"}},e._l(e.copyModuleData.data.items,(function(t,i){return a("div",{key:i,staticClass:"default-draggable__item"},[a("div",{staticClass:"default-draggable__title text-overflow"},[e._v(e._s(t.displayedTitle||t.title))]),a("i",{staticClass:"h5-icon h5-icon-cuowu1 default-draggable__icon-delete",on:{click:function(t){return e.deleteCourse(i)}}})])})),0),a("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"condition"===e.sourceType,expression:"sourceType === 'condition'"}],attrs:{title:"排列顺序："}},[a("div",{staticClass:"section-right__item"},[a("el-select",{attrs:{placeholder:"时间区间",size:"mini"},model:{value:e.limitDays,callback:function(t){e.limitDays=t},expression:"limitDays"}},e._l(e.dateOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"condition"===e.sourceType,expression:"sourceType === 'condition'"}],attrs:{title:"显示个数："}},[a("el-select",{attrs:{placeholder:"请选择个数",size:"mini"},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}},e._l(e.limitOptions,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("course-modal",{attrs:{slot:"modal",visible:e.modalVisible,limit:e.limit,type:e.type,"course-list":e.copyModuleData.data.items},on:{visibleChange:e.modalVisibleHandler,updateCourses:e.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports;function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}a("28a5");var W=window.location,K=W.protocol,Q=W.pathname,X=W.host,Y={components:{VueCropper:l.VueCropper,settingCell:c},props:["item","index","active"],data:function(){return{baseUri:"".concat(K,"//").concat(X).concat(Q.split("/").slice(0,-1).join("/"),"/"),chooseVisible:!1,chooseType:"",imgChooseList:[["static/images/graphic/list/1/0.open@2x.png","static/images/graphic/list/1/1.type@2x.png","static/images/graphic/list/1/2.class@2x.png","static/images/graphic/list/1/3.new@2x.png","static/images/graphic/list/1/4.free@2x.png","static/images/graphic/list/1/5.live@2x.png","static/images/graphic/list/1/6.problem@2x.png","static/images/graphic/list/1/7.series@2x.png","static/images/graphic/list/1/8.hot@2x.png","static/images/graphic/list/1/9.vip@2x.png"]],appTypeBaseList:[{value:"openCourse",label:"公开课分类"},{value:"classroom",label:"班级分类"},{value:"course",label:"课程分类"}],h5TypeBaseList:[{value:"classroom",label:"班级分类"},{value:"course",label:"课程分类"}],typeText:{openCourse:"公开课",classroom:"班级",course:"课程",vip:"会员"},groupList:[],activeIndex:this.active,option:{img:"",outputType:"png",autoCrop:!0,autoCropWidth:80,autoCropHeight:80,fixedNumber:[80,80],fixed:!0,high:!1,enlarge:2},imageCropped:!1,dialogVisible:!1,pathName:this.$route.name}},computed:J(J({},Object(D.c)(["isLoading","vipLevels","vipSettings","vipSetupStatus","vipPlugin","settings"])),{},{vipDisabled:function(){return!(this.vipSetupStatus&&this.vipSettings&&this.vipSettings.enabled&&this.vipSettings.h5Enabled)},typeOptions:function(){if("h5Setting"===this.pathName)return this.h5TypeBaseList;if("appSetting"===this.pathName){var e=this.vipDisabled?[]:[{value:"vip",label:"会员专区"}];return[].concat(e,Object(g.a)(this.appTypeBaseList))}}}),created:function(){this.getCurrentType()},methods:J(J({},Object(D.b)(["getCategoryType"])),{},{getCurrentType:function(){var e=this;this.groupList.length=0,this.item.link.type&&"vip"!==this.item.link.type&&this.getCategoryType({type:this.item.link.type}).then((function(t){t.forEach((function(t){e.groupList.push(t)}))}))},getTypeText:function(e){return this.typeText[e]},setCurrentImg:function(e){this.item.image.uri=this.baseUri+e,this.chooseVisible=!1},handleRemove:function(e,t){this.$emit("removeItem",e)},getDefaultImg:function(e){switch(e){case"openCourse":return"static/images/openCourse.png";case"course":return"static/images/hotcourse.png";case"classroom":return"static/images/hotclass.png";default:return"".concat(this.baseUri,"static/images/graphic/default/icon@2x.png")}},beforeUpload:function(e){this.chooseVisible=!1;var t=e.type,a=e.size/1024/1024;-1!==t.indexOf("image")?a>2?this.$message({message:"文件大小不得超过 2 MB",type:"error"}):this.readFail(e):this.$message({message:"文件类型仅支持图片格式",type:"error"})},chooseImg:function(){this.chooseVisible=!0},readFail:function(e){var t=this;this.dialogVisible=!0;var a=new FileReader;a.onload=function(){t.option.img=a.result},a.readAsDataURL(e)},stopCrop:function(){var e=this;this.$refs.cropper.stopCrop(),this.dialogVisible=!1,this.$refs.cropper.getCropData((function(t){e.imageCropped=!0,e.uploadImg(t)}))},uploadImg:function(e){if(this.imageCropped){this.imageCropped=!1;var t=new FormData;t.append("file",e),t.append("group","system"),this.sendUploadFile(t)}},sendUploadFile:function(e){var t=this;o.a.uploadFile({data:e}).then((function(e){"miniprogramSetting"===t.pathName&&(e.uri=e.uri.replace(/^(\/\/)|(http:\/\/)/,"https://")),t.item.image=e,t.$emit("selected",{selectIndex:t.activeIndex,imageUrl:e.uri}),t.$message({message:"图片上传成功",type:"success"})})).catch((function(e){t.$message({message:e.message,type:"error"})}))},selected:function(e){this.imgAdress=this.item.image.uri,this.activeIndex=e,this.$emit("selected",{selectIndex:e,imageUrl:this.item.image.uri})}}),watch:{"item.link.type":{handler:function(e){this.getCurrentType()}}}},Z={components:{item:Object(r.a)(Y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"graphic-navigation-item clearfix",class:{active:e.active===e.index},on:{click:function(t){return e.selected(e.index)}}},[a("div",{staticClass:"graphic-navigation-item-left clearfix"},[a("div",{staticClass:"add-img",on:{click:e.chooseImg}},[e.item.image.uri?a("img",{staticClass:"graphic-navigation-img",attrs:{src:e.item.image.uri}}):a("img",{staticClass:"graphic-navigation-img",attrs:{src:e.getDefaultImg(e.item.link.type)}}),a("div",{staticClass:"graphic-navigation-img-mask"},[e._v("更换图片")])])]),a("div",{staticClass:"graphic-navigation-item-right clearfix"},[a("div",{staticClass:"add-title"},[e._v("\n      标题："),a("el-input",{attrs:{size:"mini",placeholder:"请输入标题",maxlength:"5",clearable:""},model:{value:e.item.title,callback:function(t){e.$set(e.item,"title",t)},expression:"item.title"}})],1),a("div",{staticClass:"add-title"},[e._v("\n      链接来源：\n      "),a("el-select",{attrs:{placeholder:"请选择",size:"mini",width:"150px"},model:{value:e.item.link.type,callback:function(t){e.$set(e.item.link,"type",t)},expression:"item.link.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.groupList.length,expression:"groupList.length"}],staticClass:"add-choose"},[e._v("\n      "+e._s(e.getTypeText(e.item.link.type))+"分类：\n      "),a("el-select",{attrs:{placeholder:"请选择",size:"mini",width:"150px"},model:{value:e.item.link.categoryId,callback:function(t){e.$set(e.item.link,"categoryId",t)},expression:"item.link.categoryId"}},e._l(e.groupList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)]),a("img",{directives:[{name:"show",rawName:"v-show",value:e.active===e.index,expression:"active === index"}],staticClass:"icon-delete",attrs:{src:"static/images/delete.png"},on:{click:function(t){return e.handleRemove(e.index)}}}),a("el-dialog",{attrs:{visible:e.chooseVisible,"append-to-body":!0,title:"选择图片",width:"60%"},on:{"update:visible":function(t){e.chooseVisible=t}}},[a("div",{staticClass:"setting-graphicNavigation-choose-container"},e._l(e.imgChooseList,(function(t,i){return a("div",{key:i,staticClass:"choose-container-group"},e._l(t,(function(t,i){return a("div",{key:i,staticClass:"choose-container-group-item"},[a("img",{staticClass:"graphic-navigation-img",attrs:{src:t},on:{click:function(a){return e.setCurrentImg(t)}}})])})),0)})),0),a("div",{staticClass:"setting-graphicNavigation-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.chooseVisible=!1}}},[e._v("取 消")]),a("el-upload",{staticClass:"upload-img",attrs:{"http-request":e.uploadImg,"before-upload":e.beforeUpload,"show-file-list":!1,action:"string",accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP"}},[a("el-button",{attrs:{type:"primary"}},[e._v("上传图片")])],1)],1)]),a("el-dialog",{attrs:{visible:e.dialogVisible,title:"提示:通过鼠标滚轮缩放图片",width:"80%","append-to-body":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"setting-graphicNavigation-cropper-container"},[a("vueCropper",{directives:[{name:"show",rawName:"v-show",value:e.option.img,expression:"option.img"}],ref:"cropper",attrs:{img:e.option.img,fixed:e.option.fixed,enlarge:e.option.enlarge,"auto-crop":e.option.autoCrop,"fixed-number":e.option.fixedNumber,"auto-crop-width":e.option.autoCropWidth,"auto-crop-height":e.option.autoCropHeight,outputType:e.option.outputType}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.stopCrop}},[e._v("确 定")])],1)])],1)}),[],!1,null,null,null).exports,moduleFrame:m,"e-graphic-navigation":a("7f80").a,"e-suggest":I},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{activeItemIndex:0,pathName:this.$route.name}},computed:{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){}}},watch:{copyModuleData:{handler:function(e){this.$emit("updateModule",e)},deep:!0}},methods:{selected:function(e){this.activeItemIndex=e.selectIndex},removeHanlder:function(e){this.copyModuleData.data.length<=1?this.$message({message:"不得少于1个",type:"info"}):this.copyModuleData.data.splice(e,1)},addHandler:function(){this.copyModuleData.data.length>=10?this.$message({message:"最多上传10个",type:"info"}):this.copyModuleData.data.push({title:"",image:{url:"",uri:""},link:{}})}}},ee=Object(r.a)(Z,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("module-frame",{attrs:{"is-active":e.isActive,"is-incomplete":e.isIncomplete,"container-class":"setting-graphicNavigation"}},[a("div",{attrs:{slot:"preview"},slot:"preview"},[a("e-graphic-navigation",{attrs:{graphicNavigation:e.copyModuleData.data}})],1),a("div",{staticClass:"carousel-allocate",attrs:{slot:"setting"},slot:"setting"},[e.moduleData.tips?a("e-suggest",{key:e.moduleData.moduleType,attrs:{suggest:e.moduleData.tips}}):e._e(),a("header",{staticClass:"title"},[e._v("\n      图文导航设置\n      "),a("div",{staticClass:"help-text"},[e._v("建议图片尺寸为80x80px，支持 jpg/png/gif 格式，大小不超过2MB")])]),e._l(e.copyModuleData.data,(function(t,i){return a("div",{key:i},[a("item",{attrs:{item:t,index:i,active:e.activeItemIndex},on:{selected:e.selected,removeItem:e.removeHanlder}})],1)})),a("el-button",{staticClass:"setting-graphicNavigation-add",attrs:{type:"primary"},on:{click:e.addHandler}},[e._v("添加图文导航")])],2)])}),[],!1,null,null,null).exports,te={components:{moduleFrame:m,settingCell:c,courseModal:O,poster:a("00e4").a,"e-suggest":I},data:function(){return{modalVisible:!1,imgAdress:"http://www.esdev.com/themes/jianmo/img/banner_net.jpg",courseSets:[],imageMode:["responsive","size-fit"],linkOptions:[{key:0,type:"course_list",label:"选择课程"},{key:1,type:"classroom_list",label:"选择班级"},{key:2,type:"vip",label:"选择会员"}],pathName:this.$route.name,type:"course_list",radio:"insideLink"}},props:{active:{type:Boolean,default:!1},moduleData:{type:Object},incomplete:{type:Boolean,default:!1}},computed:{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData.data},set:function(){}},courseLinkText:{get:function(){if("vip"===this.type)return"会员专区";var e=this.courseSets[0];return e?"course_list"===this.type?e.displayedTitle:e.title:this.copyModuleData.link.target?this.copyModuleData.link.target.title:void 0},set:function(){}}},watch:{copyModuleData:{handler:function(e){this.$emit("updateModule",e)},deep:!0},radio:function(e){var t=this.moduleData.data.link;if("insideLink"!==e)"miniprogramSetting"!==this.pathName&&(t.type="url");else{var a="classroom_list"===this.type?"classroom":"course";t.type=a}}},created:function(){if("miniprogramSetting"!==this.pathName)return this.type=this.moduleData.data.link.type,void("url"===this.moduleData.data.link.type&&(this.radio="url"))},methods:{beforeUpload:function(e){var t=e.type,a=e.size/1024/1024,i="";if(-1===t.indexOf("image")?i="文件类型仅支持图片格式":a>2&&(i="文件大小不得超过 2 MB"),i)return this.$message({type:"error",message:i}),!1},uploadImg:function(e){var t=this,a=new FormData;a.append("file",e.file),a.append("group","system"),o.a.uploadFile({data:a}).then((function(e){"miniprogramSetting"===t.pathName&&(e.uri=e.uri.replace(/^(\/\/)|(http:\/\/)/,"https://")),t.copyModuleData.image=e,t.$message({message:"图片上传成功",type:"success"})})).catch((function(e){t.$message({message:e.message,type:"error"})}))},modalVisibleHandler:function(e){this.modalVisible=e},getUpdatedCourses:function(e){if(this.courseSets=e,e.length){if("classroom_list"===this.type)return this.moduleData.data.link.target={id:e[0].id,title:e[0].title,courseSetId:e[0].id},void(this.moduleData.data.link.type="classroom");this.moduleData.data.link.target={id:e[0].id,title:e[0].title||e[0].courseSetTitle,courseSetId:e[0].courseSet.id,displayedTitle:e[0].displayedTitle},this.moduleData.data.link.type="course"}},removeCourseLink:function(){this.courseSets=[],this.$set(this.copyModuleData.link,"target",null)},handleClose:function(){this.type="",this.moduleData.data.link.type="",this.removeCourseLink()},insideLinkHandle:function(e){"vip"!==e?this.modalVisible=!0:this.moduleData.data.link.type="vip",this.type=e}}},ae=Object(r.a)(te,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("module-frame",{attrs:{containerClass:"setting-poster",isActive:e.isActive,isIncomplete:e.isIncomplete}},[a("div",{staticClass:"poster-image-container",attrs:{slot:"preview"},slot:"preview"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.copyModuleData.image.uri,expression:"!copyModuleData.image.uri"}],staticClass:"image-mask"},[e._v("\n      广告图片\n    ")]),a("poster",{directives:[{name:"show",rawName:"v-show",value:e.copyModuleData.image.uri,expression:"copyModuleData.image.uri"}],class:e.imageMode[e.copyModuleData.responsive],attrs:{poster:e.copyModuleData,feedback:!1}})],1),a("div",{staticClass:"poster-allocate",attrs:{slot:"setting"},slot:"setting"},[e.moduleData.tips?a("e-suggest",{key:e.moduleData.moduleType,attrs:{suggest:e.moduleData.tips}}):e._e(),a("header",{staticClass:"title"},[e._v("\n      图片广告设置\n      "),a("div",{staticClass:"help-text"},[e._v("建议图片宽度为750px,支持jpg/png/gif格式，图片大小不超过2MB")])]),a("div",{staticClass:"default-allocate__content clearfix"},[a("setting-cell",{attrs:{title:"广告图片：",customClass:"poster-item-setting__section",leftClass:"required-option"}},[a("el-upload",{attrs:{action:"string",accept:".jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.PBG,.GIF,.BMP","http-request":e.uploadImg,"before-upload":e.beforeUpload,"show-file-list":!1}},[a("div",{staticClass:"image-uploader"},[a("img",{directives:[{name:"show",rawName:"v-show",value:e.copyModuleData.image.uri,expression:"copyModuleData.image.uri"}],staticClass:"poster-img",attrs:{src:e.copyModuleData.image.uri}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.copyModuleData.image.uri,expression:"!copyModuleData.image.uri"}],staticClass:"add-img"},[a("span",[a("i",{staticClass:"text-18"},[e._v("+")]),e._v(" 添加图片")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.copyModuleData.image.uri,expression:"copyModuleData.image.uri"}],staticClass:"uploader-mask"},[e._v("更换图片")])])])],1),a("setting-cell",{attrs:{title:"链接：",customClass:"poster-item-setting__section"}},[a("el-radio",{attrs:{label:"insideLink"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("站内链接")]),"miniprogramSetting"!==e.pathName?a("el-radio",{attrs:{label:"url"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("自定义链接")]):e._e()],1),a("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"url"!==e.radio,expression:"radio !== 'url'"}],attrs:{title:"",customClass:"poster-item-setting__section"}},[a("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:!e.courseLinkText,expression:"!courseLinkText"}]},[a("el-button",{staticClass:"el-dropdown-link",attrs:{size:"mini"}},[e._v("\n            添加链接\n          ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.linkOptions,(function(t){return a("el-dropdown-item",{key:t.key,nativeOn:{click:function(a){return e.insideLinkHandle(t.type)}}},[e._v(e._s(t.label))])})),1)],1),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.courseLinkText,expression:"courseLinkText"}],staticClass:"courseLink",attrs:{closable:"","disable-transitions":!0},on:{close:e.handleClose}},[a("el-tooltip",{staticClass:"text-content ellipsis",attrs:{effect:"dark",placement:"top"}},[a("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.courseLinkText))]),a("span",[e._v(e._s(e.courseLinkText))])])],1)],1),a("setting-cell",{directives:[{name:"show",rawName:"v-show",value:"url"===e.radio,expression:"radio === 'url'"}],attrs:{title:"输入链接：",customClass:"poster-item-setting__section"}},[a("el-input",{attrs:{size:"mini",placeholder:"例如 http://www.eduosho.com",clearable:""},model:{value:e.copyModuleData.link.url,callback:function(t){e.$set(e.copyModuleData.link,"url",t)},expression:"copyModuleData.link.url"}})],1),a("setting-cell",{attrs:{title:"自适应手机屏幕：",customClass:"poster-item-setting__section"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.copyModuleData.responsive,callback:function(t){e.$set(e.copyModuleData,"responsive",t)},expression:"copyModuleData.responsive"}},[e._v("开启")]),a("el-radio",{attrs:{label:"0"},model:{value:e.copyModuleData.responsive,callback:function(t){e.$set(e.copyModuleData,"responsive",t)},expression:"copyModuleData.responsive"}},[e._v("关闭")])],1)],1)],1),a("course-modal",{attrs:{slot:"modal",visible:e.modalVisible,type:["course_list","classroom_list"].includes(e.type)?e.type:"course_list",limit:"1",courseList:e.courseSets},on:{visibleChange:e.modalVisibleHandler,updateCourses:e.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports,ie=a("5af2"),se={components:{moduleFrame:m,courseModal:O,draggable:f.a,settingCell:c,"e-coupon":ie.a,"e-suggest":I},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},data:function(){return{modalVisible:!1,imgAdress:"http://www.esdev.com/themes/jianmo/img/banner_net.jpg",imageMode:["responsive","size-fit"],pathName:this.$route.name,type:"coupon"}},computed:{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){}},radio:{get:function(){return this.copyModuleData.data.titleShow},set:function(e){this.copyModuleData.data.titleShow=e}},portal:function(){return P.a[this.pathName]}},watch:{copyModuleData:{handler:function(e){this.$emit("updateModule",e)},deep:!0},radio:function(e){this.showTitle(e)}},methods:{modalVisibleHandler:function(e){this.modalVisible=e},getUpdatedCourses:function(e){this.copyModuleData.data.items=e,e.length},addCoupon:function(){this.modalVisible=!0},removeCourseLink:function(e){this.copyModuleData.data.items.splice(e,1)},handleClose:function(e){this.removeCourseLink(e)},showTitle:function(){this.copyModuleData.data.titleShow=this.radio}}},oe=Object(r.a)(se,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("module-frame",{attrs:{"is-active":e.isActive,"is-incomplete":e.isIncomplete,"container-class":"setting-coupon"}},[a("div",{staticClass:"find-page__part coupon-preview__container",attrs:{slot:"preview"},slot:"preview"},[a("e-coupon",{attrs:{coupons:e.copyModuleData.data.items,feedback:!1,"show-title":e.radio}})],1),a("div",{staticClass:"coupon-allocate",attrs:{slot:"setting"},slot:"setting"},[e.moduleData.tips?a("e-suggest",{key:e.moduleData.moduleType,attrs:{suggest:e.moduleData.tips}}):e._e(),a("header",{staticClass:"title"},[e._v("\n      优惠券设置（仅显示未过期的优惠券）\n      "),"miniprogram"===e.portal?a("div",{staticClass:"text-12 color-gray mts"},[e._v("使用优惠券配置功能，小程序版本需要升级到1.3.2及以上")]):e._e()]),a("div",{staticClass:"default-allocate__content"},[a("setting-cell",{attrs:{title:"标题栏："}},[a("el-radio",{attrs:{label:"show"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("显示")]),a("el-radio",{attrs:{label:"unshow"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("不显示")])],1),a("setting-cell",{attrs:{title:"优惠券选择：","left-class":"required-option"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.addCoupon}},[e._v("添加优惠券")])],1),e.copyModuleData.data.items?a("div",[a("draggable",{staticClass:"default-draggable__list",model:{value:e.copyModuleData.data.items,callback:function(t){e.$set(e.copyModuleData.data,"items",t)},expression:"copyModuleData.data.items"}},e._l(e.copyModuleData.data.items,(function(t,i){return a("div",{key:i,staticClass:"default-draggable__item"},[a("div",{staticClass:"default-draggable__title text-overflow"},[e._v(e._s(t.name))]),a("i",{staticClass:"h5-icon h5-icon-cuowu1 default-draggable__icon-delete",on:{click:function(t){return e.handleClose(i)}}})])})),0)],1):e._e()],1)],1),a("course-modal",{attrs:{slot:"modal",visible:e.modalVisible,type:e.type,"course-list":e.copyModuleData.data.items,limit:"10"},on:{visibleChange:e.modalVisibleHandler,updateCourses:e.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports;function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var re={name:"vip",components:{moduleFrame:m,settingCell:c,vipList:a("0468").a,"e-suggest":I},data:function(){return{pathName:this.$route.name}},props:{active:{type:Boolean,default:!1},moduleData:{type:Object},incomplete:{type:Boolean,default:!1}},computed:ne(ne({},Object(D.c)(["vipLevels"])),{},{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData.data},set:function(){}},sort:{get:function(){return this.moduleData.data.sort},set:function(e){this.moduleData.data.sort=e}},items:{get:function(){return this.moduleData.data.items},set:function(e){this.moduleData.data.items=e}},radio:{get:function(){return this.copyModuleData.titleShow},set:function(e){this.copyModuleData.titleShow=e}},portal:function(){return P.a[this.pathName]}}),watch:{copyModuleData:{handler:function(e){this.$emit("updateModule",e)},deep:!0},sort:function(){this.items=this.items.reverse()},radio:function(e){this.showTitle(e)}},created:function(){var e;Array.isArray(this.items)&&this.items.length>0||(e=this.items).push.apply(e,Object(g.a)(this.vipLevels))},methods:{showTitle:function(){this.copyModuleData.titleShow=this.radio}}},ce=Object(r.a)(re,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("module-frame",{attrs:{containerClass:"setting-vip",isActive:e.isActive,isIncomplete:e.isIncomplete}},[a("div",{attrs:{slot:"preview"},slot:"preview"},[a("vip-list",{attrs:{items:e.items,sort:e.copyModuleData.sort,feedback:!1,showTitle:e.radio}})],1),a("div",{attrs:{slot:"setting"},slot:"setting"},[e.moduleData.tips?a("e-suggest",{key:e.moduleData.moduleType,attrs:{suggest:e.moduleData.tips}}):e._e(),a("header",{staticClass:"title"},[e._v("\n      会员设置\n      "),"miniprogram"===e.portal?a("div",{staticClass:"text-12 color-gray mts"},[e._v("\n      使用会员专区配置功能，小程序版本需要升级到1.3.4及以上")]):e._e()]),a("div",{staticClass:"default-allocate__content clearfix"},[a("setting-cell",{attrs:{title:"标题栏："}},[a("el-radio",{attrs:{label:"show"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("显示")]),a("el-radio",{attrs:{label:"unshow"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("不显示")])],1),a("setting-cell",{attrs:{title:"排列顺序："}},[a("el-radio",{attrs:{label:"asc"},model:{value:e.copyModuleData.sort,callback:function(t){e.$set(e.copyModuleData,"sort",t)},expression:"copyModuleData.sort"}},[e._v("从低到高")]),a("el-radio",{attrs:{label:"desc"},model:{value:e.copyModuleData.sort,callback:function(t){e.$set(e.copyModuleData,"sort",t)},expression:"copyModuleData.sort"}},[e._v("从高到低")])],1),a("div",{staticClass:"default-draggable__list still-draggable__list",model:{value:e.items,callback:function(t){e.items=t},expression:"items"}},e._l(e.items,(function(t,i){return a("div",{key:i,staticClass:"default-draggable__item"},[a("div",{staticClass:"default-draggable__title text-overflow"},[e._v(e._s(t.name))])])})),0)],1)],1)])}),[],!1,null,null,null).exports,ue={name:"search",components:{moduleFrame:m,"e-suggest":I},props:{active:{type:Boolean,default:!1},moduleData:{type:Object,default:function(){}},incomplete:{type:Boolean,default:!1}},computed:{isActive:{get:function(){return this.active},set:function(){}},isIncomplete:{get:function(){return this.incomplete},set:function(){}},copyModuleData:{get:function(){return this.moduleData},set:function(){}}},watch:{copyModuleData:{handler:function(e){this.$emit("updateModule",e)},deep:!0}}},de=Object(r.a)(ue,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("module-frame",{attrs:{containerClass:"setting-search",isActive:e.isActive,isIncomplete:e.isIncomplete}},[a("div",{attrs:{slot:"preview"},slot:"preview"},[a("van-search",{attrs:{shape:"round",background:"#ffffff",placeholder:"搜索课程、班级"}})],1),a("div",{attrs:{slot:"setting"},slot:"setting"},[e.moduleData.tips?a("e-suggest",{key:e.moduleData.moduleType,attrs:{suggest:e.moduleData.tips}}):e._e(),a("header",{staticClass:"title"},[e._v("\n      搜索设置\n    ")]),a("div",{staticClass:"text-14 color-gray mts"},[a("i",{staticClass:"el-icon-warning"}),e._v(" \n      搜索功能目前只支持搜索班级和课程")])],1)])}),[],!1,null,null,null).exports,pe={name:"marketing-groupon",components:{moduleFrame:m,courseModal:O,activity:a("e32a").a,settingCell:c,"e-suggest":I},props:{active:{type:Boolean,default:!1},moduleData:{type:Object},incomplete:{type:Boolean,default:!1}},data:function(){return{modalVisible:!1,courseSets:[],pathName:this.$route.name}},computed:{copyModuleData:{get:function(){return this.moduleData.data},set:function(){}},activityName:function(){return this.moduleData.data.activity.name},activityTitle:function(){var e=this.moduleData.type;return"seckill"===e?"秒杀设置":"cut"===e?"砍价设置":"拼团设置"},radio:{get:function(){return this.copyModuleData.titleShow},set:function(e){this.copyModuleData.titleShow=e}},portal:function(){return P.a[this.pathName]}},methods:{modalVisibleHandler:function(e){this.modalVisible=e},openModal:function(){this.modalVisible=!0},getUpdatedCourses:function(e){this.courseSets=e,e.length&&(this.copyModuleData.activity=e[0])},removeActivity:function(){this.courseSets=[],this.$set(this.copyModuleData,"activity",{})},handleClose:function(){this.removeActivity()}}},me=Object(r.a)(pe,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("module-frame",{attrs:{containerClass:"setting-groupon",isActive:e.active,isIncomplete:e.incomplete}},[a("div",{staticClass:"groupon-container",attrs:{slot:"preview"},slot:"preview"},[a("activity",{attrs:{activity:e.copyModuleData.activity,tag:e.copyModuleData.tag,showTitle:e.radio,type:e.moduleData.type,feedback:!1}})],1),a("div",{staticClass:"groupon-allocate",attrs:{slot:"setting"},slot:"setting"},[e.moduleData.tips?a("e-suggest",{key:e.moduleData.moduleType,attrs:{suggest:e.moduleData.tips}}):e._e(),a("header",{staticClass:"title"},[e._v(e._s(e.activityTitle)+"\n      "),"miniprogram"===e.portal?a("div",{staticClass:"text-12 color-gray mts"},[e._v("营销活动配置即将发布，敬请期待...")]):e._e()]),a("div",{staticClass:"groupon-item-setting clearfix"},[a("div",{staticClass:"groupon-item-setting__section clearfix"},[a("setting-cell",{staticClass:"mbm",attrs:{title:"标题栏："}},[a("el-radio",{attrs:{label:"show"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("显示")]),a("el-radio",{attrs:{label:"unshow"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("不显示")])],1),a("p",{staticClass:"pull-left section-left"},[e._v("活动：")]),a("div",{staticClass:"section-right"},[a("div",{staticClass:"required-option"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.activityName,expression:"!activityName"}],attrs:{type:"info",size:"mini"},on:{click:e.openModal}},[e._v("选择活动")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:e.activityName,expression:"activityName"}],staticClass:"courseLink",attrs:{closable:"","disable-transitions":!0},on:{close:e.handleClose}},[a("el-tooltip",{staticClass:"text-content ellipsis",attrs:{effect:"dark",placement:"top"}},[a("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.activityName))]),a("span",[e._v(e._s(e.activityName))])])],1)],1)])],1),a("div",{staticClass:"groupon-item-setting__section clearfix"},[a("p",{staticClass:"pull-left section-left"},[e._v("活动标签：")]),a("div",{staticClass:"section-right pull-left"},[a("el-input",{attrs:{size:"mini",maxLength:"8",placeholder:"请输入活动名称",clearable:""},model:{value:e.copyModuleData.tag,callback:function(t){e.$set(e.copyModuleData,"tag",t)},expression:"copyModuleData.tag"}})],1)])])],1),a("course-modal",{attrs:{slot:"modal",visible:e.modalVisible,limit:"1",courseList:e.courseSets,type:e.moduleData.type},on:{visibleChange:e.modalVisibleHandler,updateCourses:e.getUpdatedCourses},slot:"modal"})],1)}),[],!1,null,null,null).exports,ge=a("a026"),he=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("slide_show"===e.type)for(var a=0;a<e.data.length;a+=1)if(!e.data[a].image.uri)return t&&ge.default.prototype.$message({message:"请完善轮播图模块信息！",type:"error"}),!0;if("course_list"===e.type){var i=e.data.items.length;if(!e.data.title||"custom"===e.data.sourceType&&!i)return t&&ge.default.prototype.$message({message:"请完善课程模块信息！",type:"error"}),!0}if("graphic_navigation"===e.type)for(var s=0;s<e.data.length;s+=1){var o=e.data[s],l=o.image.uri,n=o.title,r=o.link.type;if(!l||!n||!r)return t&&ge.default.prototype.$message({message:"请完善图文导航模块信息！",type:"error"}),!0}if("classroom_list"===e.type){var c=e.data.items.length;if(!e.data.title||"custom"===e.data.sourceType&&!c)return t&&ge.default.prototype.$message({message:"请完善班级模块信息！",type:"error"}),!0}if("open_course_list"===e.type){var u=e.data.items.length;if(!e.data.title||"custom"===e.data.sourceType&&!u)return t&&ge.default.prototype.$message({message:"请完善公开课模块信息！",type:"error"}),!0}return"poster"!==e.type||e.data.image.uri?["groupon","seckill","cut"].includes(e.type)&&!e.data.activity.id?(t&&ge.default.prototype.$message({message:"请完善".concat({seckill:"秒杀",cut:"砍价",groupon:"拼团"}[e.type],"模块信息！"),type:"error"}),!0):"coupon"===e.type&&!e.data.items.length&&(t&&ge.default.prototype.$message({message:"请完善优惠券模块信息！",type:"error"}),!0):(t&&ge.default.prototype.$message({message:"请完善广告模块信息！",type:"error"}),!0)},ve={components:{carousel:L,course:F,poster:ae,"marketing-activity":me,coupon:oe,vip:ce,openCourse:G,graphicNavigation:ee,Search:de},props:{module:{type:Object,default:function(){return{}}},active:{type:Boolean,default:!0},index:{type:Number,default:0},moduleKey:{type:String,default:"demo-1"},saveFlag:{type:Number,default:0},startValidate:{type:Boolean,default:!1}},computed:{isActive:{get:function(){return this.active},set:function(){this.active||this.$emit("activeModule",this.index)}},validateFuc:function(){if(this.saveFlag)return he(this.module)}},watch:{saveFlag:function(e){e&&this.triggerValidate()}},created:function(){this.module.moduleType=this.moduleKey,this.triggerValidate()},updated:function(){this.module.moduleType=this.moduleKey},data:function(){return{incomplete:!1,moduleDefault:s.f}},methods:{activeModule:function(){this.isActive=!0},updateHandler:function(){},triggerValidate:function(){if("poster"===this.module.type){var e=this.module.data.link;"url"===e.type?e.target=null:e.url=""}var t=he(this.module,this.startValidate);this.$emit("updateModule",{incomplete:t,updateModule:this.module})},handleRemove:function(e,t){this.$emit("removeModule",e)}}},fe=Object(r.a)(ve,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"module-template",on:{click:e.activeModule}},[e.module.type===e.moduleDefault.slideShow.type?a("carousel",{key:"carousel"+e.module.oldIndex,attrs:{active:e.isActive,moduleData:e.module,incomplete:e.validateFuc},on:{updateModule:function(t){return e.updateHandler(e.module,e.index)}}}):e._e(),e.module.type===e.moduleDefault.courseList.type?a("course",{key:"course"+e.module.oldIndex,attrs:{active:e.isActive,moduleData:e.module,incomplete:e.validateFuc},on:{updateModule:function(t){return e.updateHandler(e.module,e.index)}}}):e._e(),e.module.type===e.moduleDefault.classList.type?a("course",{key:"classroom"+e.module.oldIndex,attrs:{active:e.isActive,moduleData:e.module,incomplete:e.validateFuc},on:{updateModule:function(t){return e.updateHandler(e.module,e.index)}}}):e._e(),e.module.type===e.moduleDefault.poster.type?a("poster",{key:"poster"+e.module.oldIndex,attrs:{active:e.isActive,moduleData:e.module,incomplete:e.validateFuc},on:{updateModule:function(t){return e.updateHandler(e.module,e.index)}}}):e._e(),e.module.type===e.moduleDefault.coupon.type?a("coupon",{key:"coupon"+e.module.oldIndex,attrs:{active:e.isActive,moduleData:e.module,incomplete:e.validateFuc},on:{updateModule:function(t){return e.updateHandler(e.module,e.index)}}}):e._e(),e.module.type===e.moduleDefault.vip.type?a("vip",{key:"vip"+e.module.oldIndex,attrs:{active:e.isActive,moduleData:e.module,incomplete:e.validateFuc},on:{updateModule:function(t){return e.updateHandler(e.module,e.index)}}}):e._e(),e.module.type===e.moduleDefault.graphicNavigation.type?a("graphic-navigation",{key:"navigation"+e.module.oldIndex,attrs:{active:e.isActive,moduleData:e.module,incomplete:e.validateFuc},on:{updateModule:function(t){return e.updateHandler(e.module,e.index)}}}):e._e(),e.module.type===e.moduleDefault.search.type?a("Search",{key:"search"+e.module.oldIndex,attrs:{active:e.isActive,moduleData:e.module,incomplete:e.validateFuc},on:{updateModule:function(t){return e.updateHandler(e.module,e.index)}}}):e._e(),e.module.type===e.moduleDefault.openCourseList.type?a("open-course",{key:"openCourse"+e.module.oldIndex,attrs:{active:e.isActive,moduleData:e.module,incomplete:e.validateFuc},on:{updateModule:function(t){return e.updateHandler(e.module,e.index)}}}):e._e(),[e.moduleDefault.groupon.type,e.moduleDefault.cut.type,e.moduleDefault.seckill.type].includes(e.module.type)?a("marketing-activity",{key:"marketing"+e.module.oldIndex,attrs:{active:e.isActive,moduleData:e.module,incomplete:e.validateFuc},on:{updateModule:function(t){return e.updateHandler(e.module,e.index)}}}):e._e(),a("img",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"icon-delete",attrs:{src:"static/images/delete.png"},on:{click:function(t){return e.handleRemove(e.module,e.index)}}})],1)}),[],!1,null,null,null);t.a=fe.exports},"5f16":function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return m})),a.d(t,"h",(function(){return g})),a.d(t,"g",(function(){return h})),a("386d"),a("28a5");var i=window.location,s=i.protocol,o=i.pathname,l=i.host,n="".concat(s,"//").concat(l).concat(o.split("/").slice(0,-1).join("/"),"/"),r={slideShow:{type:"slide_show",moduleType:"",data:[{title:"",image:{},link:{type:"course",target:null,url:""}}]},courseList:{type:"course_list",moduleType:"",data:{title:"",sourceType:"condition",categoryId:"0",sort:"recommendedSeq",lastDays:"0",limit:"4",displayStyle:"distichous",items:[]}},classList:{type:"classroom_list",moduleType:"",data:{title:"",sourceType:"condition",categoryId:"0",sort:"recommendedSeq",lastDays:"0",limit:"4",displayStyle:"distichous",items:[]}},openCourseList:{type:"open_course_list",moduleType:"",data:{title:"",sourceType:"condition",categoryId:"0",limitDays:"0",limit:"4",displayStyle:"distichous",items:[]}},graphicNavigation:{type:"graphic_navigation",moduleType:"navigation-1",data:[{title:"公开课",image:{url:"",uri:"".concat(n,"static/images/openCourse.png")},link:{type:"openCourse",target:"跳转公开课“全部”列表",url:""}},{title:"热门课",image:{url:"",uri:"".concat(n,"static/images/hotcourse.png")},link:{type:"course",target:"跳转课程“全部”列表",url:""}},{title:"热销班",image:{url:"",uri:"".concat(n,"static/images/hotclass.png")},link:{type:"classroom",target:"跳转班级“全部”列表",url:""}}]},h5GraphicNavigation:{type:"graphic_navigation",moduleType:"navigation-1",data:[{title:"免费课",image:{url:"",uri:"".concat(n,"static/images/openCourse.png")},link:{type:"course",target:"跳转课程“全部”列表",url:""}},{title:"热门课",image:{url:"",uri:"".concat(n,"static/images/hotcourse.png")},link:{type:"course",target:"跳转课程“全部”列表",url:""}},{title:"热销班",image:{url:"",uri:"".concat(n,"static/images/hotclass.png")},link:{type:"classroom",target:"跳转班级“全部”列表",url:""}}]},poster:{type:"poster",moduleType:"",data:{image:{},link:{type:"course",target:{},url:""},responsive:"1"}},groupon:{type:"groupon",moduleType:"",data:{activity:{},tag:"",titleShow:"show"}},cut:{type:"cut",moduleType:"",data:{activity:{},tag:"",titleShow:"show"}},seckill:{type:"seckill",moduleType:"",data:{activity:{},tag:"",titleShow:"show"}},coupon:{type:"coupon",moduleType:"",data:{items:[],titleShow:"show"}},vip:{type:"vip",moduleType:"",data:{items:[],sort:"asc",title:"",titleShow:"show"}},search:{type:"search",moduleType:"",data:{}}},c=[{name:"轮播图",default:r.slideShow},{name:"课程列表",default:r.courseList},{name:"班级列表",default:r.classList},{name:"图片广告",default:r.poster},{name:"优惠券",default:r.coupon},{name:"会员专区",default:r.vip}],u=[{name:"拼团",default:r.groupon},{name:"砍价",default:r.cut},{name:"秒杀",default:r.seckill}],d=[{name:"轮播图",default:r.slideShow},{name:"课程列表",default:r.courseList},{name:"班级列表",default:r.classList},{name:"图片广告",default:r.poster},{name:"优惠券",default:r.coupon},{name:"会员专区",default:r.vip},{name:"图文导航",default:r.graphicNavigation},{name:"公开课列表",default:r.openCourseList}],p=[{name:"轮播图",default:r.slideShow,icon:"icon-lunbotu"},{name:"课程列表",default:r.courseList,icon:"icon-kechengliebiao"},{name:"班级列表",default:r.classList,icon:"icon-banjiliebiao"},{name:"图片广告",default:r.poster,icon:"icon-tuwenguanggao"},{name:"图文导航",default:r.h5GraphicNavigation,icon:"icon-tuwendaohang"},{name:"搜索",default:r.search,icon:"icon-sousuo"}],m=[{name:"优惠券",default:r.coupon,icon:"icon-youhuiquan"},{name:"会员专区",default:r.vip,icon:"icon-huiyuanzhuanqu"},{name:"拼团",default:r.groupon,icon:"icon-pintuan"},{name:"砍价",default:r.cut,icon:"icon-kanjia"},{name:"秒杀",default:r.seckill,icon:"icon-miaosha"}],g={classroom_list:{key:"title"},course_list:{key:"displayedTitle"},open_course_list:{key:"title"},groupon:{key:"name"},coupon:{key:"name"},cut:{key:"name"},seckill:{key:"name"}},h={course_list:{text:"课程"},classroom_list:{text:"班级"},open_course_list:{text:"公开课"},groupon:{text:"活动"},coupon:{text:"优惠券"},cut:{text:"活动"},seckill:{text:"活动"}}},a89d:function(e,t,a){"use strict";t.a=function(e,t){for(var a={},i=0;i<e.length&&e[i][t];i+=1)a[e[i][t]]=e[i];return a}}}]);